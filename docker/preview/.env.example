# =============================================================================
# PREVIEW DEPLOYMENT ENVIRONMENT VARIABLES (Coolify)
# =============================================================================
#
# Configure these in Coolify's Environment Variables section.
# Variables marked with :?Required will show a red border if not set.
#
# Coolify Auto-Generated Variables (don't set these):
#   - SERVICE_FQDN_WEBAPP: Domain assigned to webapp service
#   - SERVICE_FQDN_APPLICATION_SERVER: Domain for API (if assigned)
#   - COOLIFY_BRANCH: Git branch name
#   - COOLIFY_CONTAINER_NAME: Container name with UUID
#
# =============================================================================

# -----------------------------------------------------------------------------
# SHARED INFRASTRUCTURE (compose.shared-infra.yaml)
# -----------------------------------------------------------------------------

# Base domain for preview environment (e.g., preview.hephaestus.cit.tum.de)
# PR deployments will be subdomains: pr-123.preview.hephaestus.cit.tum.de
PREVIEW_DOMAIN=

# Docker image tag for shared services (webhook-ingest)
IMAGE_TAG=latest

# GitHub webhook secret (same as configured in GitHub App)
WEBHOOK_SECRET=

# Keycloak admin credentials
KC_ADMIN_USERNAME=admin
KC_ADMIN_PASSWORD=

# Keycloak database password
KEYCLOAK_DB_PASSWORD=

# Keycloak GitHub OAuth (for user login via GitHub)
KEYCLOAK_GITHUB_CLIENT_ID=
KEYCLOAK_GITHUB_CLIENT_SECRET=

# Keycloak confidential client secret (shared by all PR deployments)
# Generate with: openssl rand -base64 32
KEYCLOAK_HEPHAESTUS_CONFIDENTIAL_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# APPLICATION STACK (compose.app.yaml)
# -----------------------------------------------------------------------------

# PostgreSQL password for per-PR database
POSTGRES_PASSWORD=hephaestus-preview

# Preview build flag (enables Storybook in footer)
# Set to "true" for preview deployments to bundle Storybook component library
PREVIEW_BUILD=true

# GitHub App credentials
GH_APP_ID=
GH_APP_PRIVATE_KEY=
GH_AUTH_TOKEN=

# AI Model configuration (provider:model format)
MODEL_NAME=openai:gpt-4o
DETECTION_MODEL_NAME=openai:gpt-4o-mini

# OpenAI
OPENAI_API_KEY=
OPENAI_API_VERSION=

# Azure OpenAI (alternative to OpenAI)
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_API_KEY=

# Ollama (alternative to OpenAI)
OLLAMA_HOST=
OLLAMA_BASIC_AUTH_USERNAME=
OLLAMA_BASIC_AUTH_PASSWORD=

# -----------------------------------------------------------------------------
# OPTIONAL
# -----------------------------------------------------------------------------

# Skip Keycloak login (for testing only)
KEYCLOAK_SKIP_LOGIN=false

# NATS settings
NATS_ENABLED=true

# Monitoring (relaxed defaults for previews)
MONITORING_TIMEFRAME=14
MONITORING_RUN_ON_STARTUP=false
MONITORING_SYNC_CRON=0 0 2 * * *

# Observability
SENTRY_DSN=
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_HOST=
