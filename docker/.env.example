# =============================================================================
# PRODUCTION ENVIRONMENT VARIABLES
# =============================================================================
#
# Copy this file to .env and fill in the values for your production deployment.
#
# Usage:
#   docker compose -f compose.proxy.yaml -f compose.core.yaml -f compose.app.yaml up -d
#
# =============================================================================

# -----------------------------------------------------------------------------
# GENERAL
# -----------------------------------------------------------------------------

# Hostname for the application (e.g., hephaestus.cit.tum.de)
APP_HOSTNAME=

# Docker image tag to deploy (e.g., latest, v1.0.0, develop)
IMAGE_TAG=latest

# Timezone for containers
TIMEZONE=UTC

# -----------------------------------------------------------------------------
# KEYCLOAK - Authentication
# -----------------------------------------------------------------------------

# Keycloak admin credentials (for initial setup)
KC_BOOTSTRAP_ADMIN_USERNAME=admin
KC_BOOTSTRAP_ADMIN_PASSWORD=

# Keycloak GitHub OAuth (for user login via GitHub)
# Create OAuth App at: https://github.com/settings/developers
KEYCLOAK_GITHUB_CLIENT_ID=
KEYCLOAK_GITHUB_CLIENT_SECRET=

# GitHub username that should receive Keycloak admin rights on first login
KEYCLOAK_GITHUB_ADMIN_USERNAME=

# Client secret for the hephaestus-confidential client (used by application-server)
# Generate with: openssl rand -base64 32
KEYCLOAK_HEPHAESTUS_CONFIDENTIAL_CLIENT_SECRET=

# Optional Keycloak settings (defaults shown)
# KC_HTTP_ENABLED=true
# KC_HEALTH_ENABLED=true
# KC_PROXY_HEADERS=xforwarded

# Skip Keycloak login for testing (NOT for production!)
KEYCLOAK_SKIP_LOGIN=false

# -----------------------------------------------------------------------------
# GITHUB INTEGRATION
# -----------------------------------------------------------------------------

# GitHub App credentials
# Create at: https://github.com/settings/apps
GH_APP_ID=
GH_APP_PRIVATE_KEY=
# Alternative: path to private key file
# GH_APP_PRIVATE_KEY_LOCATION=/path/to/private-key.pem

# GitHub personal access token (for API operations)
GH_AUTH_TOKEN=

# Webhook secret for GitHub and GitLab webhooks (prefer SHA-256; e.g., `openssl rand -hex 32`)
WEBHOOK_SECRET=

# -----------------------------------------------------------------------------
# AI MODELS
# -----------------------------------------------------------------------------

# Model names in format provider:model (e.g., openai:gpt-4o, azure:gpt-4)
MODEL_NAME=openai:gpt-4o
DETECTION_MODEL_NAME=openai:gpt-4o-mini

# OpenAI API
OPENAI_API_KEY=

# Azure OpenAI (alternative to OpenAI)
AZURE_RESOURCE_NAME=
AZURE_API_KEY=

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------

# PostgreSQL credentials (used by application postgres container)
POSTGRES_DB=hephaestus
POSTGRES_USER=root
# Note: POSTGRES_PASSWORD is hardcoded to 'root' in compose.app.yaml

# -----------------------------------------------------------------------------
# NATS - Message Queue
# -----------------------------------------------------------------------------

NATS_ENABLED=true
NATS_DURABLE_CONSUMER_NAME=hephaestus-consumer

# -----------------------------------------------------------------------------
# MONITORING & SYNC
# -----------------------------------------------------------------------------

# Timeframe in days for monitoring data
MONITORING_TIMEFRAME=14

# Run sync on application startup
MONITORING_RUN_ON_STARTUP=false

# Cron expression for sync schedule (default: 2 AM daily)
MONITORING_SYNC_CRON=0 0 2 * * *

# Cooldown between syncs in minutes
MONITORING_SYNC_COOLDOWN_IN_MINUTES=5

# Sync all issues and pull requests (not just recent ones)
MONITORING_SYNC_ALL_ISSUES_AND_PULL_REQUESTS=false

# Backfill settings
MONITORING_BACKFILL_ENABLED=true
MONITORING_BACKFILL_BATCH_SIZE=50
MONITORING_BACKFILL_RATE_LIMIT_THRESHOLD=500
MONITORING_BACKFILL_COOLDOWN_MINUTES=5

# Run automatic bad practice detection for all PRs
RUN_AUTOMATIC_DETECTION_FOR_ALL=false

# -----------------------------------------------------------------------------
# LEADERBOARD NOTIFICATIONS
# -----------------------------------------------------------------------------

# Enable Slack notifications for leaderboard
LEADERBOARD_NOTIFICATION_ENABLED=false

# Team name to show in notifications
LEADERBOARD_NOTIFICATION_TEAM=

# Slack channel ID for notifications
LEADERBOARD_NOTIFICATION_CHANNEL_ID=

# Schedule for leaderboard notifications
LEADERBOARD_SCHEDULE_DAY=MONDAY
LEADERBOARD_SCHEDULE_TIME=09:00

# -----------------------------------------------------------------------------
# SLACK INTEGRATION
# -----------------------------------------------------------------------------

# Slack Bot token (xoxb-...)
SLACK_BOT_TOKEN=

# Slack signing secret for webhook verification
SLACK_SIGNING_SECRET=

# -----------------------------------------------------------------------------
# OBSERVABILITY
# -----------------------------------------------------------------------------

# Sentry error tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# Langfuse LLM observability
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_BASE_URL=

# PostHog analytics
POSTHOG_ENABLED=false
POSTHOG_API_HOST=https://app.posthog.com
POSTHOG_PROJECT_API_KEY=
POSTHOG_PROJECT_ID=
POSTHOG_PERSONAL_API_KEY=

# -----------------------------------------------------------------------------
# LEGAL
# -----------------------------------------------------------------------------

# HTML content for legal pages (can include links)
LEGAL_IMPRINT_HTML=
LEGAL_PRIVACY_HTML=
