# GraphQL query for fetching project fields and configuration
# Used by GraphQL-based sync services to sync field definitions

query GetProjectWithFields($nodeId: ID!) {
    rateLimit {
        cost
        limit
        remaining
        resetAt
    }
    node(id: $nodeId) {
        ... on ProjectV2 {
            id
            fullDatabaseId
            number
            title
            fields(first: 50) {
                pageInfo {
                    hasNextPage
                    endCursor
                }
                totalCount
                nodes {
                    __typename
                    ... on ProjectV2Field {
                        id
                        name
                        dataType
                        createdAt
                        updatedAt
                    }
                    ... on ProjectV2SingleSelectField {
                        id
                        name
                        dataType
                        createdAt
                        updatedAt
                        options {
                            id
                            name
                            color
                            description
                        }
                    }
                    ... on ProjectV2IterationField {
                        id
                        name
                        dataType
                        createdAt
                        updatedAt
                        configuration {
                            iterations {
                                id
                                title
                                startDate
                                duration
                            }
                        }
                    }
                }
            }
        }
    }
}
