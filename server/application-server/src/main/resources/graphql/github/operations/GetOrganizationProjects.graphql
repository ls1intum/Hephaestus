# GraphQL query for fetching organization projects (GitHub Projects V2)
# Used by GraphQL-based sync services
#
# =============================================================================
# COST ANALYSIS
# =============================================================================
#
# This query has minimal nesting complexity:
#   - projectsV2: Single-level collection
#   - owner/creator: Inline objects (not collections), no additional cost
#
# Cost calculation: projectsV2(100) = 100 nodes = 1 cost point (very efficient)
#
# Using full page size is appropriate because:
#   - Projects are flat records with no nested collections
#   - Owner and creator are single objects, not paginated
#   - Organizations typically have <100 active projects
#
# =============================================================================
# FRAGMENTS
# =============================================================================
#
# Uses fragments for consistent field selection. See ProjectFragments.graphql
# for canonical fragment definitions.

query GetOrganizationProjects($login: String!, $first: Int!, $after: String) {
    rateLimit {
        cost
        limit
        remaining
        resetAt
    }
    organization(login: $login) {
        projectsV2(first: $first, after: $after, orderBy: { field: UPDATED_AT, direction: DESC }) {
            pageInfo {
                hasNextPage
                endCursor
            }
            totalCount
            nodes {
                ...ProjectV2BaseFields
                owner {
                    ...ProjectV2OwnerFields
                }
                creator {
                    ...ActorFields
                }
            }
        }
    }
}
# Fragments (ProjectV2BaseFields, ProjectV2OwnerFields, ActorFields) are
# resolved from ProjectFragments.graphql via ResourceDocumentSource.
