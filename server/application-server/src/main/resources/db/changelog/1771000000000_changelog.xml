<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <!--
    =======================================================================================
    Discussion Sync Cursor Migration
    =======================================================================================

    Adds discussion_sync_cursor column to repository_to_monitor table.
    This allows discussion sync to persist pagination cursor for resumable sync operations.

    See: GitHubDiscussionSyncService cursor persistence feature
    =======================================================================================
    -->

    <changeSet id="1771000000000-1-add-discussion-sync-cursor" author="GitHubDiscussionFeature">
        <comment>Add discussion_sync_cursor column to repository_to_monitor for resumable discussion sync</comment>
        <addColumn tableName="repository_to_monitor">
            <column name="discussion_sync_cursor" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>

    <!--
    Changeset 1771000000000-2 removed: uk_discussion_answer_comment_id is already created
    in 1770000000000_changelog.xml changeset 1770000000000-6-add-unique-constraints.

    Changeset 1771000000000-3 removed: discussion_comment.body was declared as TEXT (nullable)
    in 1770000000000_changelog.xml, so there is no NOT NULL constraint to drop.
    -->

</databaseChangeLog>
