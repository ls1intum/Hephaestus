# Minimal test configuration for Spring Boot tests
spring:
  # Database configuration for tests (overridden by Testcontainers)
  datasource:
    # These values will be overridden by @DynamicPropertySource in test classes
    url: jdbc:postgresql://localhost:5432/test
    driver-class-name: org.postgresql.Driver
    username: test
    password: test
    # HikariCP configuration optimized for tests
    hikari:
      maximum-pool-size: 5
      minimum-idle: 1
      max-lifetime: 300000  # 5 minutes (shorter for tests)
      connection-timeout: 10000  # 10 seconds
      idle-timeout: 60000  # 1 minute (shorter for tests)
      validation-timeout: 5000  # 5 seconds
      leak-detection-threshold: 10000  # 10 seconds for leak detection
      connection-test-query: SELECT 1

  # JPA configuration for tests
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: false

  # Test-specific configurations for faster shutdown
  task:
    execution:
      shutdown:
        await-termination: true
        await-termination-period: 5s

  # Disable liquibase for tests (use JPA auto DDL instead)
  liquibase:
    enabled: false

  # Security configuration for tests (minimal config)
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://localhost:8081/realms/test

# GitHub configuration for tests (matches actual property)
github:
  auth-token: test-token-not-real
  app:
    id: 0
    privateKey: ""
    privateKeyLocation: ""

# NATS configuration for tests (matches actual properties)
nats:
  enabled: false
  server: nats://localhost:4222
  timeframe: 1
  durable-consumer-name: test-consumer

# Intelligence service configuration for tests (stub)
hephaestus:
  intelligence-service:
    url: http://localhost:8080
  workspace:
    init-default: false

monitoring:
  run-on-startup: false

# Logging configuration for tests
logging:
  level:
    root: WARN
    de:
      tum:
        in:
          www1:
            hephaestus: INFO
