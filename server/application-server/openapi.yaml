openapi: 3.1.0
info:
  contact:
    email: felixtj.dietrich@tum.de
    name: Felix T.J. Dietrich
  description: API documentation for the Hephaestus application server.
  license:
    name: MIT License
    url: https://github.com/ls1intum/Hephaestus/blob/develop/LICENSE
  title: Hephaestus API
  version: 0.18.0
servers:
- description: Default Server URL
  url: /
security:
- bearerAuth: []
tags:
- description: Global contributor information
  name: Contributors
- description: |-
    Workspace registry endpoints that operate outside of a specific workspace slug.
     These routes stay under the classic /workspaces base path while slugged routes
     live in {@link WorkspaceController WorkspaceController} via <code>@WorkspaceScopedController</code>.
  name: workspace-registry-controller
- description: Workspace-scoped team settings management
  name: Team Settings
- description: Team management within workspace
  name: Teams
- description: Bad practice detection and resolution
  name: Code Practices
- description: User profile and activity data
  name: Profile
- description: |-
    Controller for managing workspace memberships and roles.
     Handles CRUD operations for workspace members and role assignments.
  name: workspace-membership-controller
- description: Contributor rankings and league statistics
  name: Leaderboard
- description: "User account management (settings, deletion)"
  name: Account
paths:
  /contributors:
    get:
      description: Returns contributors to the Hephaestus project (for the About page)
      operationId: listGlobalContributors
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Contributor"
          description: list of contributors sorted by contribution count
      security: []
      summary: List global contributors
      tags:
      - Contributors
  /user:
    delete:
      description: Permanently delete the current user's account and all associated
        data (GDPR)
      operationId: deleteUser
      responses:
        "200":
          description: OK
      summary: Delete user account
      tags:
      - Account
  /user/settings:
    get:
      description: Get the current user's notification and research participation
        preferences
      operationId: getUserSettings
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserSettings"
          description: OK
      summary: Get user settings
      tags:
      - Account
    post:
      description: Update the current user's notification and research participation
        preferences
      operationId: updateUserSettings
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserSettings"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserSettings"
          description: OK
      summary: Update user settings
      tags:
      - Account
  /workspaces:
    get:
      operationId: listWorkspaces
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/WorkspaceListItem"
          description: Workspace list
      summary: List all workspaces
      tags:
      - workspace-registry
    post:
      operationId: createWorkspace
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateWorkspaceRequest"
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workspace"
          description: Workspace created
      summary: Create a new workspace
      tags:
      - workspace-registry
  /workspaces/{workspaceSlug}:
    delete:
      operationId: purgeWorkspace
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      responses:
        "204":
          description: Workspace purged
      summary: Purge (soft delete) a workspace
      tags:
      - workspace
    get:
      operationId: getWorkspace
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workspace"
          description: Workspace returned
      security: []
      summary: Fetch a workspace by slug
      tags:
      - workspace
  /workspaces/{workspaceSlug}/leaderboard:
    get:
      description: Creates a ranked contributor list for the specified time range
      operationId: getLeaderboard
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: start of the time range (inclusive)
        in: query
        name: after
        required: true
        schema:
          type: string
          format: date-time
      - description: end of the time range (exclusive)
        in: query
        name: before
        required: true
        schema:
          type: string
          format: date-time
      - description: Team filter to apply in INDIVIDUAL mode; ignored when mode is
          TEAM.
        in: query
        name: team
        required: true
        schema:
          type: string
      - description: Determines the ranking metric. In TEAM mode SCORE uses summed
          contribution scores; LEAGUE_POINTS uses total league points.
        in: query
        name: sort
        required: true
        schema:
          type: string
          enum:
          - SCORE
          - LEAGUE_POINTS
      - description: aggregation mode (INDIVIDUAL or TEAM)
        in: query
        name: mode
        required: true
        schema:
          type: string
          enum:
          - INDIVIDUAL
          - TEAM
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/LeaderboardEntry"
          description: ranked list of leaderboard entries
      security: []
      summary: Generate leaderboard
      tags:
      - Leaderboard
  /workspaces/{workspaceSlug}/leaderboard/users/{login}/league-stats:
    post:
      description: Computes projected league point changes for a specific user based
        on their leaderboard entry
      operationId: computeUserLeagueStats
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: the user's GitHub login
        in: path
        name: login
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LeaderboardEntry"
        description: the user's current leaderboard entry for comparison
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LeagueChange"
          description: league change statistics including projected point delta
      summary: Calculate user league stats
      tags:
      - Leaderboard
  /workspaces/{workspaceSlug}/league/reset:
    put:
      operationId: resetAndRecalculateLeagues
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      responses:
        "200":
          description: OK
      summary: Reset and recalculate workspace leagues
      tags:
      - workspace
  /workspaces/{workspaceSlug}/members:
    get:
      description: |-
        List all members of the workspace with pagination.
         Accessible to all workspace members (MEMBER role and above).
      operationId: listMembers
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: Page number (0-indexed)
        in: query
        name: page
        required: false
        schema:
          type: integer
          format: int32
          default: 0
      - description: "Page size (default 50, max 100)"
        in: query
        name: size
        required: false
        schema:
          type: integer
          format: int32
          default: 50
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/WorkspaceMembership"
          description: List of workspace memberships
      security: []
      summary: List all members of the workspace with pagination.
      tags:
      - workspace-membership
  /workspaces/{workspaceSlug}/members/assign:
    post:
      description: |-
        Assign or update a role for a workspace member.
         OWNER can assign any role. ADMIN can assign ADMIN or MEMBER roles.
      operationId: assignRole
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AssignRoleRequest"
        description: Role assignment request
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WorkspaceMembership"
          description: Updated membership
      summary: Assign or update a role for a workspace member.
      tags:
      - workspace-membership
  /workspaces/{workspaceSlug}/members/me:
    get:
      description: Get the current user's membership in this workspace.
      operationId: getCurrentUserMembership
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WorkspaceMembership"
          description: the current user's membership details
      security: []
      summary: Get the current user's membership in this workspace.
      tags:
      - workspace-membership
  /workspaces/{workspaceSlug}/members/{userId}:
    delete:
      description: |-
        Revoke a user's membership (remove them from workspace).
         OWNER can remove anyone except themselves if they are the last OWNER.
         ADMIN can remove MEMBER and ADMIN roles.
      operationId: removeMember
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: User ID to remove
        in: path
        name: userId
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: 204 No Content on success
      summary: Revoke a user's membership (remove them from workspace).
      tags:
      - workspace-membership
    get:
      description: |-
        Get a specific member's details.
         Accessible to all workspace members.
      operationId: getMember
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: User ID
        in: path
        name: userId
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WorkspaceMembership"
          description: Workspace membership details
      security: []
      summary: Get a specific member's details.
      tags:
      - workspace-membership
  /workspaces/{workspaceSlug}/mentor/chat:
    post:
      operationId: mentorChat
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                greeting:
                  type: boolean
                  description: "If true, generate a greeting without user message"
                id:
                  type: string
                  format: uuid
                message:
                  type: object
                  properties:
                    id:
                      type: string
                      format: uuid
                    parts:
                      type: array
                      items:
                        anyOf:
                        - type: object
                          properties:
                            text:
                              type: string
                              maxLength: 2000
                              minLength: 1
                            type:
                              type: string
                              enum:
                              - text
                          required:
                          - text
                          - type
                        - type: object
                          properties:
                            mediaType:
                              type: string
                              enum:
                              - image/jpeg
                              - image/png
                            name:
                              type: string
                              maxLength: 100
                              minLength: 1
                            type:
                              type: string
                              enum:
                              - file
                            url:
                              type: string
                              format: uri
                          required:
                          - mediaType
                          - name
                          - type
                          - url
                    role:
                      type: string
                      enum:
                      - user
                  required:
                  - id
                  - parts
                  - role
                previousMessageId:
                  type: string
              required:
              - id
        description: Chat request body
        required: true
      responses:
        "200":
          content:
            text/event-stream:
              schema:
                $ref: "#/components/schemas/StreamPart"
          description: Event stream of chat updates.
      summary: Handle mentor chat (set greeting=true for initial greeting without
        user message)
      tags:
      - mentor
      - exported
      x-hephaestus:
        export: true
  /workspaces/{workspaceSlug}/mentor/documents:
    get:
      operationId: listDocuments
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - explode: true
        in: query
        name: page
        required: false
        schema:
          type:
          - integer
          - "null"
          default: 0
          minimum: 0
        style: form
      - explode: true
        in: query
        name: size
        required: false
        schema:
          type: integer
          default: 20
          maximum: 100
          minimum: 1
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/DocumentSummary"
          description: Document summaries
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Missing context
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal error
      summary: List documents owned by the authenticated user
      tags:
      - documents
      - exported
      x-hephaestus:
        export: true
    post:
      operationId: createDocument
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateDocumentRequest"
        description: Create document
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Document"
          description: Created document
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Missing required context
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal error
      summary: Create a new document
      tags:
      - documents
      - exported
      x-hephaestus:
        export: true
  /workspaces/{workspaceSlug}/mentor/documents/{id}:
    delete:
      operationId: deleteDocument
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - explode: false
        in: path
        name: id
        required: true
        schema:
          type: string
          format: uuid
        style: simple
      responses:
        "204":
          description: Deleted
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Missing context
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal error
      summary: Delete a document and all versions
      tags:
      - documents
      - exported
      x-hephaestus:
        export: true
    get:
      operationId: getDocument
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - explode: false
        in: path
        name: id
        required: true
        schema:
          type: string
          format: uuid
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Document"
          description: Document
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Missing context
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal error
      summary: Get latest version of a document
      tags:
      - documents
      - exported
      x-hephaestus:
        export: true
    put:
      operationId: updateDocument
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - explode: false
        in: path
        name: id
        required: true
        schema:
          type: string
          format: uuid
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateDocumentRequest"
        description: Update document
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Document"
          description: Updated document
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Missing context
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal error
      summary: Update a document (creates new version)
      tags:
      - documents
      - exported
      x-hephaestus:
        export: true
  /workspaces/{workspaceSlug}/mentor/documents/{id}/versions:
    delete:
      operationId: deleteDocumentVersionsAfter
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - explode: false
        in: path
        name: id
        required: true
        schema:
          type: string
          format: uuid
        style: simple
      - explode: true
        in: query
        name: after
        required: true
        schema:
          type: string
          format: date-time
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Document"
          description: Deleted versions
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Missing context
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal error
      summary: Delete versions after timestamp
      tags:
      - documents
      - exported
      x-hephaestus:
        export: true
    get:
      operationId: listVersions
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - explode: false
        in: path
        name: id
        required: true
        schema:
          type: string
          format: uuid
        style: simple
      - explode: true
        in: query
        name: page
        required: false
        schema:
          type:
          - integer
          - "null"
          default: 0
          minimum: 0
        style: form
      - explode: true
        in: query
        name: size
        required: false
        schema:
          type: integer
          default: 20
          maximum: 100
          minimum: 1
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Document"
          description: Document versions
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Missing context
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal error
      summary: List versions of a document
      tags:
      - documents
      - exported
      x-hephaestus:
        export: true
  /workspaces/{workspaceSlug}/mentor/documents/{id}/versions/{versionNumber}:
    get:
      operationId: getVersion
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - explode: false
        in: path
        name: id
        required: true
        schema:
          type: string
          format: uuid
        style: simple
      - explode: false
        in: path
        name: versionNumber
        required: true
        schema:
          type:
          - integer
          - "null"
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Document"
          description: Document
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Missing context
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal error
      summary: Get specific version
      tags:
      - documents
      - exported
      x-hephaestus:
        export: true
  /workspaces/{workspaceSlug}/mentor/messages/{messageId}/vote:
    put:
      operationId: voteMessage
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - explode: false
        in: path
        name: messageId
        required: true
        schema:
          type: string
          format: uuid
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VoteMessageRequest"
        description: Vote request body
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatMessageVote"
          description: Vote recorded
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Missing context
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Message not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal error
      summary: Vote on a chat message (upvote/downvote) - idempotent upsert
      tags:
      - vote
      - exported
      x-hephaestus:
        export: true
  /workspaces/{workspaceSlug}/mentor/threads/grouped:
    get:
      operationId: getGroupedThreads
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ChatThreadGroup"
          description: Grouped chat threads
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Missing context
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal error
      summary: List chat threads grouped by time buckets
      tags:
      - mentor
      - exported
      x-hephaestus:
        export: true
  /workspaces/{workspaceSlug}/mentor/threads/{threadId}:
    get:
      operationId: getThread
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - explode: false
        in: path
        name: threadId
        required: true
        schema:
          type: string
          format: uuid
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ThreadDetail"
          description: Thread detail with messages
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Missing required context
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Thread not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal error
        "503":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Service temporarily unavailable
      summary: Get mentor chat thread detail
      tags:
      - mentor
      - exported
      x-hephaestus:
        export: true
  /workspaces/{workspaceSlug}/notifications:
    patch:
      operationId: updateNotifications
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateWorkspaceNotificationsRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workspace"
          description: Workspace updated
      summary: Update leaderboard notification preferences
      tags:
      - workspace
  /workspaces/{workspaceSlug}/practices/badpractice/{id}:
    get:
      description: Retrieves details of a specific bad practice by ID
      operationId: getBadPractice
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: id
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PullRequestBadPractice"
          description: Bad practice returned
      security: []
      summary: Get a specific bad practice
      tags:
      - Code Practices
  /workspaces/{workspaceSlug}/practices/badpractice/{id}/feedback:
    post:
      description: Submits user feedback for a detected bad practice
      operationId: provideFeedback
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: id
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BadPracticeFeedback"
        required: true
      responses:
        "200":
          description: Feedback submitted successfully
        "403":
          description: User is not an assignee of the pull request
      summary: Provide feedback for a bad practice
      tags:
      - Code Practices
  /workspaces/{workspaceSlug}/practices/badpractice/{id}/resolve:
    post:
      description: "Updates the state of a bad practice to FIXED, WONT_FIX, or WRONG"
      operationId: resolve
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: id
        required: true
        schema:
          type: integer
          format: int64
      - in: query
        name: state
        required: true
        schema:
          type: string
          enum:
          - GOOD_PRACTICE
          - MINOR_ISSUE
          - NORMAL_ISSUE
          - CRITICAL_ISSUE
          - FIXED
          - WONT_FIX
          - WRONG
      responses:
        "200":
          description: Bad practice resolved successfully
      summary: Resolve a bad practice
      tags:
      - Code Practices
  /workspaces/{workspaceSlug}/practices/pullrequest/{pullRequestId}:
    get:
      description: Retrieves all detected bad practices for a specific pull request
      operationId: getBadPracticesForPullRequest
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: pullRequestId
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PullRequestWithBadPractices"
          description: Bad practices returned
      security: []
      summary: Get bad practices for a pull request
      tags:
      - Code Practices
  /workspaces/{workspaceSlug}/practices/pullrequest/{pullRequestId}/detect:
    post:
      description: Triggers bad practice detection for a specific pull request
      operationId: detectForPullRequest
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: pullRequestId
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DetectionResult"
          description: Detection completed successfully
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DetectionResult"
          description: Detection failed due to no updates on pull request
      summary: Detect bad practices for a pull request
      tags:
      - Code Practices
  /workspaces/{workspaceSlug}/practices/user/{login}:
    get:
      description: Retrieves all detected bad practices for pull requests assigned
        to the user
      operationId: getBadPracticesForUser
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: login
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserPractices"
          description: Bad practices returned
      security: []
      summary: Get bad practices for a user
      tags:
      - Code Practices
  /workspaces/{workspaceSlug}/practices/user/{login}/detect:
    post:
      description: Triggers bad practice detection for all pull requests of the specified
        user
      operationId: detectForUser
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: login
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DetectionResult"
          description: Detection completed successfully
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DetectionResult"
          description: Detection failed due to no updates on pull requests
      summary: Detect bad practices for a user
      tags:
      - Code Practices
  /workspaces/{workspaceSlug}/profile/{login}:
    get:
      description: "Returns user profile with workspace-scoped activity data including\
        \ open PRs, review activity, and league points"
      operationId: getUserProfile
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: the user's GitHub login
        in: path
        name: login
        required: true
        schema:
          type: string
      - in: query
        name: after
        required: false
        schema:
          type: string
          format: date-time
      - in: query
        name: before
        required: false
        schema:
          type: string
          format: date-time
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Profile"
          description: "user profile with open PRs, review activity, league points,\
            \ etc."
      security: []
      summary: Get user profile
      tags:
      - Profile
  /workspaces/{workspaceSlug}/public-visibility:
    patch:
      operationId: updatePublicVisibility
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateWorkspacePublicVisibilityRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workspace"
          description: Workspace updated
      summary: Toggle public visibility for a workspace
      tags:
      - workspace
  /workspaces/{workspaceSlug}/repositories:
    get:
      operationId: getRepositoriesToMonitor
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
          description: Repository list
      security: []
      summary: List repositories monitored by a workspace
      tags:
      - workspace
  /workspaces/{workspaceSlug}/repositories/{owner}/{name}:
    delete:
      operationId: removeRepositoryToMonitor
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: owner
        required: true
        schema:
          type: string
      - in: path
        name: name
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
      summary: Remove a repository from a workspace monitor list
      tags:
      - workspace
    post:
      operationId: addRepositoryToMonitor
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: owner
        required: true
        schema:
          type: string
      - in: path
        name: name
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
      summary: Add a repository to a workspace monitor list
      tags:
      - workspace
  /workspaces/{workspaceSlug}/schedule:
    patch:
      operationId: updateSchedule
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateWorkspaceScheduleRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workspace"
          description: Workspace updated
      summary: Update leaderboard schedule configuration
      tags:
      - workspace
  /workspaces/{workspaceSlug}/slack-credentials:
    patch:
      operationId: updateSlackCredentials
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateWorkspaceSlackCredentialsRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workspace"
          description: Workspace updated
      summary: Update Slack credentials for a workspace
      tags:
      - workspace
  /workspaces/{workspaceSlug}/slug:
    patch:
      operationId: renameSlug
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RenameWorkspaceSlugRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workspace"
          description: Workspace renamed
      summary: Rename workspace slug and create redirect
      tags:
      - workspace
  /workspaces/{workspaceSlug}/status:
    patch:
      operationId: updateStatus
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateWorkspaceStatusRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workspace"
          description: Workspace updated
      summary: Update workspace lifecycle status
      tags:
      - workspace
  /workspaces/{workspaceSlug}/team:
    get:
      description: Returns all teams in the workspace organization
      operationId: getAllTeams
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/TeamInfo"
          description: list of teams with their members and permissions
      security: []
      summary: List teams
      tags:
      - Teams
  /workspaces/{workspaceSlug}/team/{id}/visibility:
    post:
      description: Show or hide a team in leaderboard calculations
      operationId: updateTeamVisibility
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: the team ID
        in: path
        name: id
        required: true
        schema:
          type: integer
          format: int64
      - description: "whether to hide the team (query parameter, fallback)"
        in: query
        name: hidden
        required: false
        schema:
          type: boolean
      requestBody:
        content:
          application/json:
            schema:
              type: boolean
        description: "whether to hide the team (body parameter, preferred)"
      responses:
        "200":
          description: "200 OK on success, 404 if team not found"
      summary: Update team visibility
      tags:
      - Teams
  /workspaces/{workspaceSlug}/team/{teamId}/repositories/{repositoryId}/visibility:
    post:
      operationId: updateRepositoryVisibility
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: teamId
        required: true
        schema:
          type: integer
          format: int64
      - in: path
        name: repositoryId
        required: true
        schema:
          type: integer
          format: int64
      - in: query
        name: hiddenFromContributions
        required: false
        schema:
          type: boolean
      requestBody:
        content:
          application/json:
            schema:
              type: boolean
      responses:
        "200":
          description: OK
      tags:
      - Teams
  /workspaces/{workspaceSlug}/teams/{teamId}/labels/{labelId}:
    delete:
      operationId: removeLabelFromTeam
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: teamId
        required: true
        schema:
          type: integer
          format: int64
      - in: path
        name: labelId
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TeamInfo"
          description: OK
      summary: Remove a repository label from a team
      tags:
      - workspace
  /workspaces/{workspaceSlug}/teams/{teamId}/labels/{repositoryId}/{label}:
    post:
      operationId: addLabelToTeam
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - in: path
        name: teamId
        required: true
        schema:
          type: integer
          format: int64
      - in: path
        name: repositoryId
        required: true
        schema:
          type: integer
          format: int64
      - in: path
        name: label
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TeamInfo"
          description: OK
      summary: Add a repository label to a team
      tags:
      - workspace
  /workspaces/{workspaceSlug}/teams/{teamId}/settings:
    get:
      description: Returns the visibility settings for a team in the workspace
      operationId: getTeamSettings
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: the team ID
        in: path
        name: teamId
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WorkspaceTeamSettings"
          description: Team settings returned
      security: []
      summary: Get team settings
      tags:
      - Team Settings
    patch:
      description: Updates the visibility settings for a team in the workspace
      operationId: updateTeamSettings
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: the team ID
        in: path
        name: teamId
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateTeamSettingsRequest"
        description: the update request containing the hidden flag
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WorkspaceTeamSettings"
          description: Team settings updated
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WorkspaceTeamSettings"
          description: Team not found in workspace
      summary: Update team settings
      tags:
      - Team Settings
  /workspaces/{workspaceSlug}/teams/{teamId}/settings/label-filters:
    get:
      description: Returns all labels configured as filters for a team in the workspace
      operationId: getLabelFilters
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: the team ID
        in: path
        name: teamId
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/LabelInfo"
          description: Label filters returned
      security: []
      summary: Get team label filters
      tags:
      - Team Settings
  /workspaces/{workspaceSlug}/teams/{teamId}/settings/label-filters/{labelId}:
    delete:
      description: Removes a label filter from a team in the workspace
      operationId: removeLabelFilter
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: the team ID
        in: path
        name: teamId
        required: true
        schema:
          type: integer
          format: int64
      - description: the label ID to remove as filter
        in: path
        name: labelId
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "204":
          description: Label filter removed
        "404":
          description: Label filter not found
      summary: Remove label filter
      tags:
      - Team Settings
    post:
      description: Adds a label as a filter for a team in the workspace
      operationId: addLabelFilter
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: the team ID
        in: path
        name: teamId
        required: true
        schema:
          type: integer
          format: int64
      - description: the label ID to add as filter
        in: path
        name: labelId
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "201":
          description: Label filter added
        "404":
          description: Team or label not found
      summary: Add label filter
      tags:
      - Team Settings
  /workspaces/{workspaceSlug}/teams/{teamId}/settings/repositories/{repositoryId}:
    get:
      description: Returns the contribution visibility settings for a repository in
        a team
      operationId: getRepositorySettings
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: the team ID
        in: path
        name: teamId
        required: true
        schema:
          type: integer
          format: int64
      - description: the repository ID
        in: path
        name: repositoryId
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WorkspaceTeamRepositorySettings"
          description: Repository settings returned
      security: []
      summary: Get repository settings
      tags:
      - Team Settings
    patch:
      description: Updates the contribution visibility settings for a repository in
        a team
      operationId: updateRepositorySettings
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      - description: the team ID
        in: path
        name: teamId
        required: true
        schema:
          type: integer
          format: int64
      - description: the repository ID
        in: path
        name: repositoryId
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateRepositorySettingsRequest"
        description: the update request containing the hiddenFromContributions flag
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WorkspaceTeamRepositorySettings"
          description: Repository settings updated
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WorkspaceTeamRepositorySettings"
          description: Team or repository not found
      summary: Update repository settings
      tags:
      - Team Settings
  /workspaces/{workspaceSlug}/token:
    patch:
      operationId: updateToken
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateWorkspaceTokenRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workspace"
          description: Workspace updated
      summary: Update workspace Personal Access Token
      tags:
      - workspace
  /workspaces/{workspaceSlug}/users:
    get:
      operationId: getUsersWithTeams
      parameters:
      - description: Workspace slug
        in: path
        name: workspaceSlug
        required: true
        schema:
          type: string
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      responses:
        "200":
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/UserTeams"
          description: OK
      security: []
      summary: List workspace users and the teams they belong to
      tags:
      - workspace
components:
  schemas:
    AssignRoleRequest:
      type: object
      description: Request to assign or update a user's role in a workspace
      properties:
        role:
          type: string
          description: "New role to assign (OWNER, ADMIN, MEMBER)"
          enum:
          - OWNER
          - ADMIN
          - MEMBER
        userId:
          type: integer
          format: int64
          description: User ID of the member to update
      required:
      - role
      - userId
    BadPracticeFeedback:
      type: object
      description: User feedback on a detected bad practice
      properties:
        explanation:
          type: string
          description: User's explanation for the feedback
          maxLength: 2000
          minLength: 0
        type:
          type: string
          description: "Type of feedback (e.g., 'false_positive', 'not_applicable')"
          example: false_positive
          maxLength: 64
          minLength: 0
          pattern: "^[a-zA-Z0-9_-]+$"
      required:
      - explanation
      - type
    ChatMessageVote:
      type: object
      properties:
        createdAt:
          type: string
          format: date-time
        isUpvoted:
          type: boolean
        messageId:
          type: string
          format: uuid
        updatedAt:
          type: string
          format: date-time
      required:
      - createdAt
      - isUpvoted
      - messageId
      - updatedAt
      x-hephaestus:
        export: true
    ChatThreadGroup:
      type: object
      properties:
        groupName:
          type: string
        threads:
          type: array
          items:
            $ref: "#/components/schemas/ChatThreadSummary"
      required:
      - groupName
      - threads
      x-hephaestus:
        export: true
    ChatThreadSummary:
      type: object
      properties:
        createdAt:
          type: string
          format: date-time
        id:
          type: string
          format: uuid
        title:
          type: string
      required:
      - id
      - title
      x-hephaestus:
        export: true
    Contributor:
      type: object
      description: Information about a contributor to the Hephaestus project
      properties:
        avatarUrl:
          type: string
          description: URL to the contributor's avatar image
        contributions:
          type: integer
          format: int32
          description: Number of contributions to the project
          example: 42
        htmlUrl:
          type: string
          description: URL to the contributor's GitHub profile
        id:
          type: integer
          format: int64
          description: GitHub user ID
        login:
          type: string
          description: GitHub username
        name:
          type: string
          description: Display name of the contributor
      required:
      - avatarUrl
      - htmlUrl
      - id
      - login
      - name
    CreateDocumentRequest:
      type: object
      properties:
        content:
          type: string
          minLength: 1
        kind:
          $ref: "#/components/schemas/DocumentKind"
        title:
          type: string
          maxLength: 255
          minLength: 1
      required:
      - content
      - kind
      - title
      x-hephaestus:
        export: true
    CreateWorkspaceRequest:
      type: object
      description: Request to create a new workspace
      properties:
        accountLogin:
          type: string
          description: GitHub account login to associate with this workspace
          example: my-org
        accountType:
          type: string
          description: Type of GitHub account (USER or ORGANIZATION)
          enum:
          - ORG
          - USER
        displayName:
          type: string
          description: Human-readable name of the workspace
          example: My Workspace
        ownerUserId:
          type: integer
          format: int64
          description: User ID of the workspace owner
        workspaceSlug:
          type: string
          description: URL-friendly identifier for the workspace
          example: my-workspace
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      required:
      - accountLogin
      - accountType
      - displayName
      - ownerUserId
      - workspaceSlug
    DetectionResult:
      type: object
      description: Response for detection operations
      properties:
        result:
          type: string
          enum:
          - BAD_PRACTICES_DETECTED
          - NO_BAD_PRACTICES_DETECTED
          - ERROR_NO_UPDATE_ON_PULLREQUEST
    Document:
      type: object
      properties:
        content:
          type: string
        createdAt:
          type: string
          format: date-time
        id:
          type: string
          format: uuid
        kind:
          $ref: "#/components/schemas/DocumentKind"
        title:
          type: string
        userId:
          type: integer
        versionNumber:
          type: integer
      required:
      - content
      - createdAt
      - id
      - kind
      - title
      - userId
      - versionNumber
      x-hephaestus:
        export: true
    DocumentKind:
      type: string
      enum:
      - text
      x-hephaestus:
        export: true
    DocumentSummary:
      type: object
      properties:
        createdAt:
          type: string
          format: date-time
        id:
          type: string
          format: uuid
        kind:
          $ref: "#/components/schemas/DocumentKind"
        title:
          type: string
        userId:
          type: integer
      required:
      - createdAt
      - id
      - kind
      - title
      - userId
      x-hephaestus:
        export: true
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: Human-readable error message
      required:
      - error
      x-hephaestus:
        export: true
    LabelInfo:
      type: object
      description: Information about a label from a repository
      properties:
        color:
          type: string
          description: "Hex color code of the label (without #)"
          example: d73a4a
        id:
          type: integer
          format: int64
          description: Unique identifier of the label
        name:
          type: string
          description: Name of the label
        repository:
          $ref: "#/components/schemas/RepositoryInfo"
          description: Repository the label belongs to
      required:
      - color
      - id
      - name
    LeaderboardEntry:
      type: object
      description: A ranked entry in the leaderboard (individual or team)
      properties:
        numberOfApprovals:
          type: integer
          format: int32
          description: Count of review approvals
          example: 3
        numberOfChangeRequests:
          type: integer
          format: int32
          description: Count of change requests submitted
          example: 1
        numberOfCodeComments:
          type: integer
          format: int32
          description: Count of inline code review comments
          example: 7
        numberOfComments:
          type: integer
          format: int32
          description: Count of review and issue comments
          example: 10
        numberOfReviewedPRs:
          type: integer
          format: int32
          description: Count of distinct PRs reviewed
          example: 5
        numberOfUnknowns:
          type: integer
          format: int32
          description: Count of reviews with unknown/unrecognized state
          example: 0
        rank:
          type: integer
          format: int32
          description: Position in the leaderboard (1-based)
          example: 1
        reviewedPullRequests:
          type: array
          description: Sample of reviewed PRs for display
          items:
            $ref: "#/components/schemas/PullRequestInfo"
        score:
          type: integer
          format: int32
          description: Total XP score for the timeframe
          example: 150
        team:
          $ref: "#/components/schemas/TeamInfo"
          description: "Team info (populated in TEAM mode, null in INDIVIDUAL mode)"
        user:
          $ref: "#/components/schemas/UserInfo"
          description: "User info (populated in INDIVIDUAL mode, null in TEAM mode)"
      required:
      - numberOfApprovals
      - numberOfChangeRequests
      - numberOfCodeComments
      - numberOfComments
      - numberOfReviewedPRs
      - numberOfUnknowns
      - rank
      - reviewedPullRequests
      - score
    LeagueChange:
      type: object
      properties:
        leaguePointsChange:
          type: integer
          format: int32
        login:
          type: string
      required:
      - leaguePointsChange
      - login
    Profile:
      type: object
      description: Complete user profile including contribution history and activity
      properties:
        activityStats:
          $ref: "#/components/schemas/ProfileActivityStats"
          description: Aggregated activity stats consistent with leaderboard calculations
        contributedRepositories:
          type: array
          description: Repositories the user has contributed to
          items:
            $ref: "#/components/schemas/RepositoryInfo"
        firstContribution:
          type: string
          format: date-time
          description: Timestamp of the user's first contribution
        openPullRequests:
          type: array
          description: Currently open pull requests authored by the user
          items:
            $ref: "#/components/schemas/PullRequestInfo"
        reviewActivity:
          type: array
          description: Recent review activity with XP scores
          items:
            $ref: "#/components/schemas/ProfileReviewActivity"
        reviewedPullRequests:
          type: array
          description: Distinct pull requests reviewed by this user
          items:
            $ref: "#/components/schemas/PullRequestInfo"
        userInfo:
          $ref: "#/components/schemas/UserInfo"
          description: Basic information about the user
        xpRecord:
          $ref: "#/components/schemas/ProfileXpRecord"
          description: XP progress information for the users' profile
      required:
      - contributedRepositories
      - userInfo
      - xpRecord
    ProfileActivityStats:
      type: object
      description: Aggregated activity statistics with XP scores for a user profile
      properties:
        numberOfApprovals:
          type: integer
          format: int32
          description: Number of approvals given
          example: 15
        numberOfChangeRequests:
          type: integer
          format: int32
          description: Number of change requests submitted
          example: 8
        numberOfCodeComments:
          type: integer
          format: int32
          description: Number of inline code review comments
          example: 30
        numberOfComments:
          type: integer
          format: int32
          description: Number of review comments (COMMENTED state)
          example: 12
        numberOfIssueComments:
          type: integer
          format: int32
          description: Number of issue comments on pull requests
          example: 25
        numberOfReviewedPRs:
          type: integer
          format: int32
          description: Number of distinct pull requests reviewed
          example: 42
        numberOfUnknowns:
          type: integer
          format: int32
          description: Number of reviews with unknown state
          example: 0
        score:
          type: integer
          format: int32
          description: Total XP score
          example: 1250
    ProfileReviewActivity:
      type: object
      description: A review activity entry with XP score for profile display
      properties:
        author:
          $ref: "#/components/schemas/UserInfo"
          description: Author of the review
        codeComments:
          type: integer
          format: int32
          description: Number of inline code comments in the review
          example: 3
        htmlUrl:
          type: string
          description: URL to the review on the git provider
        id:
          type: integer
          format: int64
          description: Unique identifier of the review
        isDismissed:
          type: boolean
          description: Whether the review was dismissed
        pullRequest:
          $ref: "#/components/schemas/PullRequestBaseInfo"
          description: Pull request that was reviewed
        score:
          type: integer
          format: int32
          description: XP score earned for this review
          example: 25
        state:
          type: string
          description: "State of the review (APPROVED, CHANGES_REQUESTED, COMMENTED,\
            \ etc.)"
          enum:
          - COMMENTED
          - APPROVED
          - CHANGES_REQUESTED
          - PENDING
          - DISMISSED
          - UNKNOWN
        submittedAt:
          type: string
          format: date-time
          description: Timestamp when the review was submitted
      required:
      - codeComments
      - htmlUrl
      - id
      - isDismissed
      - state
    ProfileXpRecord:
      type: object
      description: User's XP and Level progress details
      properties:
        currentLevel:
          type: integer
          format: int32
          description: Current calculated level
          example: 5
        currentLevelXP:
          type: integer
          format: int64
          description: XP accumulated in the current level
          example: 450
        totalXP:
          type: integer
          format: int64
          description: Overall total XP accumulated
          example: 5450
        xpNeeded:
          type: integer
          format: int64
          description: XP needed to reach the next level
          example: 1000
      required:
      - currentLevel
      - currentLevelXP
      - totalXP
      - xpNeeded
    PullRequestBadPractice:
      type: object
      description: A detected bad practice in a pull request
      properties:
        description:
          type: string
          description: Detailed explanation and remediation guidance
        id:
          type: integer
          format: int64
          description: Unique identifier of the bad practice
        state:
          type: string
          description: "Current state of the bad practice (DETECTED, RESOLVED, DISMISSED,\
            \ etc.)"
          enum:
          - GOOD_PRACTICE
          - MINOR_ISSUE
          - NORMAL_ISSUE
          - CRITICAL_ISSUE
          - FIXED
          - WONT_FIX
          - WRONG
        title:
          type: string
          description: Short description of the bad practice
      required:
      - description
      - id
      - state
      - title
    PullRequestBaseInfo:
      type: object
      description: Basic information about a pull request
      properties:
        htmlUrl:
          type: string
          description: URL to the pull request on the git provider
        id:
          type: integer
          format: int64
          description: Unique identifier of the pull request
        isDraft:
          type: boolean
          description: Whether the pull request is in draft mode
        isMerged:
          type: boolean
          description: Whether the pull request has been merged
        number:
          type: integer
          format: int32
          description: Pull request number within the repository
          example: 42
        repository:
          $ref: "#/components/schemas/RepositoryInfo"
          description: Repository the pull request belongs to
        state:
          type: string
          description: "Current state of the pull request (OPEN, CLOSED, MERGED)"
          enum:
          - OPEN
          - CLOSED
          - MERGED
        title:
          type: string
          description: Title of the pull request
      required:
      - htmlUrl
      - id
      - isDraft
      - isMerged
      - number
      - state
      - title
    PullRequestInfo:
      type: object
      description: Detailed information about a pull request
      properties:
        additions:
          type: integer
          format: int32
          description: Number of lines added
          example: 150
        assignees:
          type: array
          description: Users assigned to the pull request
          items:
            $ref: "#/components/schemas/UserInfo"
        author:
          $ref: "#/components/schemas/UserInfo"
          description: Author of the pull request
        closedAt:
          type: string
          format: date-time
          description: Timestamp when the pull request was closed
        commentsCount:
          type: integer
          format: int32
          description: Number of comments on the pull request
          example: 5
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the pull request was created
        deletions:
          type: integer
          format: int32
          description: Number of lines deleted
          example: 50
        htmlUrl:
          type: string
          description: URL to the pull request on the git provider
        id:
          type: integer
          format: int64
          description: Unique identifier of the pull request
        isDraft:
          type: boolean
          description: Whether the pull request is in draft mode
        isMerged:
          type: boolean
          description: Whether the pull request has been merged
        labels:
          type: array
          description: Labels applied to the pull request
          items:
            $ref: "#/components/schemas/LabelInfo"
        mergedAt:
          type: string
          format: date-time
          description: Timestamp when the pull request was merged
        number:
          type: integer
          format: int32
          description: Pull request number within the repository
          example: 42
        repository:
          $ref: "#/components/schemas/RepositoryInfo"
          description: Repository the pull request belongs to
        state:
          type: string
          description: "Current state of the pull request (OPEN, CLOSED, MERGED)"
          enum:
          - OPEN
          - CLOSED
          - MERGED
        title:
          type: string
          description: Title of the pull request
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the pull request was last updated
      required:
      - additions
      - commentsCount
      - deletions
      - htmlUrl
      - id
      - isDraft
      - isMerged
      - number
      - state
      - title
    PullRequestWithBadPractices:
      type: object
      description: Pull request with associated bad practice detection results
      properties:
        additions:
          type: integer
          format: int32
          description: Number of lines added
          example: 150
        badPracticeSummary:
          type: string
          description: AI-generated summary of detected bad practices
        badPractices:
          type: array
          description: Currently active bad practices
          items:
            $ref: "#/components/schemas/PullRequestBadPractice"
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the pull request was created
        deletions:
          type: integer
          format: int32
          description: Number of lines deleted
          example: 50
        htmlUrl:
          type: string
          description: URL to the pull request on the git provider
        id:
          type: integer
          format: int64
          description: Unique identifier of the pull request
        isDraft:
          type: boolean
          description: Whether the pull request is in draft mode
        isMerged:
          type: boolean
          description: Whether the pull request has been merged
        labels:
          type: array
          description: Labels applied to the pull request
          items:
            $ref: "#/components/schemas/LabelInfo"
        number:
          type: integer
          format: int32
          description: Pull request number within the repository
          example: 42
        oldBadPractices:
          type: array
          description: Previously resolved or dismissed bad practices
          items:
            $ref: "#/components/schemas/PullRequestBadPractice"
        repository:
          $ref: "#/components/schemas/RepositoryInfo"
          description: Repository the pull request belongs to
        state:
          type: string
          description: "Current state of the pull request (OPEN, CLOSED)"
          enum:
          - OPEN
          - CLOSED
          - MERGED
        title:
          type: string
          description: Title of the pull request
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the pull request was last updated
      required:
      - additions
      - badPracticeSummary
      - badPractices
      - createdAt
      - deletions
      - htmlUrl
      - id
      - isDraft
      - isMerged
      - labels
      - number
      - oldBadPractices
      - repository
      - state
      - title
      - updatedAt
    RenameWorkspaceSlugRequest:
      type: object
      description: Request to rename a workspace's URL slug
      properties:
        newSlug:
          type: string
          description: New URL-friendly identifier for the workspace
          example: new-workspace-slug
          pattern: "^[a-z0-9][a-z0-9-]{2,50}$"
      required:
      - newSlug
    RepositoryInfo:
      type: object
      description: Information about a git repository
      properties:
        description:
          type: string
          description: Description of the repository
        hiddenFromContributions:
          type: boolean
          description: Whether contributions from this repository are hidden from
            leaderboard calculations
        htmlUrl:
          type: string
          description: URL to the repository on the git provider
        id:
          type: integer
          format: int64
          description: Unique identifier of the repository
        labels:
          type: array
          description: Labels defined in the repository
          items:
            $ref: "#/components/schemas/LabelInfo"
        name:
          type: string
          description: Name of the repository
        nameWithOwner:
          type: string
          description: "Full name including owner (e.g., 'owner/repo')"
      required:
      - hiddenFromContributions
      - htmlUrl
      - id
      - name
      - nameWithOwner
    StreamPart:
      type: object
      additionalProperties: {}
      properties:
        type:
          type: string
      required:
      - type
      x-hephaestus:
        export: true
    TeamInfo:
      type: object
      description: "Detailed information about a team including members, repositories,\
        \ and labels"
      properties:
        description:
          type: string
          description: Description of the team
        hidden:
          type: boolean
          description: Whether the team is hidden from leaderboard display
        htmlUrl:
          type: string
          description: URL to the team's page on the git provider
        id:
          type: integer
          format: int64
          description: Unique identifier of the team
        labels:
          type: array
          description: Labels configured as filters for this team
          items:
            $ref: "#/components/schemas/LabelInfo"
        members:
          type: array
          description: Members of the team (excluding bots)
          items:
            $ref: "#/components/schemas/UserInfo"
        membershipCount:
          type: integer
          format: int32
          description: Total count of team memberships
        name:
          type: string
          description: Name of the team
        organization:
          type: string
          description: Organization the team belongs to
        parentId:
          type: integer
          format: int64
          description: "ID of the parent team, if this is a sub-team"
        privacy:
          type: string
          description: Privacy level of the team (SECRET or VISIBLE)
          enum:
          - SECRET
          - VISIBLE
        repoPermissionCount:
          type: integer
          format: int32
          description: Count of repository permissions
        repositories:
          type: array
          description: Repositories the team has access to
          items:
            $ref: "#/components/schemas/RepositoryInfo"
      required:
      - hidden
      - id
      - labels
      - members
      - membershipCount
      - name
      - repoPermissionCount
      - repositories
    TeamSummary:
      type: object
      description: Lightweight summary of a team without member/repository details
      properties:
        description:
          type: string
          description: Description of the team
        hidden:
          type: boolean
          description: Whether the team is hidden from leaderboard display
        htmlUrl:
          type: string
          description: URL to the team's page on the git provider
        id:
          type: integer
          format: int64
          description: Unique identifier of the team
        name:
          type: string
          description: Name of the team
        organization:
          type: string
          description: Organization the team belongs to
        parentId:
          type: integer
          format: int64
          description: "ID of the parent team, if this is a sub-team"
        privacy:
          type: string
          description: Privacy level of the team (SECRET or VISIBLE)
          enum:
          - SECRET
          - VISIBLE
      required:
      - hidden
      - id
      - name
    ThreadDetail:
      type: object
      properties:
        id:
          type: string
          format: uuid
        messages:
          type: array
          items:
            type: object
            properties:
              createdAt:
                type: string
                format: date-time
              id:
                type: string
                format: uuid
              parentMessageId:
                type:
                - string
                - "null"
                format: uuid
              parts:
                type: array
                items:
                  type: object
                  additionalProperties: {}
                  properties:
                    type:
                      type: string
                  required:
                  - type
              role:
                type: string
                enum:
                - system
                - user
                - assistant
            required:
            - id
            - parts
            - role
        selectedLeafMessageId:
          type:
          - string
          - "null"
          format: uuid
        title:
          type:
          - string
          - "null"
      required:
      - id
      - messages
      x-hephaestus:
        export: true
    UpdateRepositorySettingsRequest:
      type: object
      description: Request to update repository contribution visibility settings in
        a workspace
      properties:
        hiddenFromContributions:
          type: boolean
          description: Whether contributions from this repository should be hidden
            from leaderboard calculations
      required:
      - hiddenFromContributions
    UpdateTeamSettingsRequest:
      type: object
      description: Request to update team visibility settings in a workspace
      properties:
        hidden:
          type: boolean
          description: Whether the team should be hidden from the leaderboard
      required:
      - hidden
    UpdateWorkspaceNotificationsRequest:
      type: object
      description: Request to update leaderboard notification settings
      properties:
        channelId:
          type: string
          description: Slack channel ID for notifications
          example: C01234567AB
          pattern: "^[CGD][A-Z0-9]{8,}$"
        enabled:
          type: boolean
          description: Whether leaderboard notifications are enabled
        team:
          type: string
          description: Team name for filtering leaderboard notifications
    UpdateWorkspacePublicVisibilityRequest:
      type: object
      description: Request to update workspace public visibility setting
      properties:
        isPubliclyViewable:
          type: boolean
          description: Whether the workspace should be publicly viewable without authentication
      required:
      - isPubliclyViewable
    UpdateWorkspaceScheduleRequest:
      type: object
      description: Request to update the leaderboard notification schedule
      properties:
        day:
          type: integer
          format: int32
          description: "Day of week (1=Monday, 7=Sunday)"
          example: 1
          maximum: 7
          minimum: 1
        time:
          type: string
          description: Time in 24-hour format (HH:mm)
          example: 09:00
          pattern: "^([01]\\d|2[0-3]):[0-5]\\d$"
      required:
      - day
      - time
    UpdateWorkspaceSlackCredentialsRequest:
      type: object
      description: Request to update Slack integration credentials
      properties:
        slackSigningSecret:
          type: string
          description: Slack Signing Secret for webhook verification
        slackToken:
          type: string
          description: Slack Bot User OAuth Token for API access
      required:
      - slackSigningSecret
      - slackToken
    UpdateWorkspaceStatusRequest:
      type: object
      description: Request to update the workspace lifecycle status
      properties:
        status:
          type: string
          description: "New lifecycle status (PENDING, ACTIVE, ARCHIVED)"
          enum:
          - ACTIVE
          - SUSPENDED
          - PURGED
      required:
      - status
    UpdateWorkspaceTokenRequest:
      type: object
      description: Request to update the workspace's GitHub Personal Access Token
      properties:
        personalAccessToken:
          type: string
          description: GitHub Personal Access Token for API access
      required:
      - personalAccessToken
    UserInfo:
      type: object
      description: Information about a user from the git provider
      properties:
        avatarUrl:
          type: string
          description: URL to the user's avatar image
        email:
          type: string
          description: "Email address of the user, if public"
        htmlUrl:
          type: string
          description: URL to the user's profile on the git provider
        id:
          type: integer
          format: int64
          description: Unique identifier of the user
        leaguePoints:
          type: integer
          format: int32
          description: League points earned by the user in the current scope
          example: 150
        login:
          type: string
          description: Login/username of the user
        name:
          type: string
          description: Display name of the user
      required:
      - avatarUrl
      - htmlUrl
      - id
      - login
      - name
    UserPractices:
      type: object
      description: Response for user bad practices listing
      properties:
        login:
          type: string
        pullRequests:
          type: array
          items:
            $ref: "#/components/schemas/PullRequestWithBadPractices"
    UserSettings:
      type: object
      description: User preferences and settings
      properties:
        participateInResearch:
          type: boolean
          description: Whether the user consents to participate in research studies
        receiveNotifications:
          type: boolean
          description: Whether the user wants to receive notifications
      required:
      - participateInResearch
      - receiveNotifications
    UserTeams:
      type: object
      properties:
        email:
          type: string
        id:
          type: integer
          format: int64
        login:
          type: string
        name:
          type: string
        teams:
          type: array
          items:
            $ref: "#/components/schemas/TeamSummary"
          uniqueItems: true
        url:
          type: string
      required:
      - id
      - login
      - name
      - teams
      - url
    VoteMessageRequest:
      type: object
      properties:
        isUpvoted:
          type: boolean
      required:
      - isUpvoted
      x-hephaestus:
        export: true
    Workspace:
      type: object
      description: Complete workspace information including configuration and settings
      properties:
        accountLogin:
          type: string
          description: GitHub account login associated with this workspace
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the workspace was created
        displayName:
          type: string
          description: Human-readable name of the workspace
        gitProviderMode:
          type: string
          description: Git provider mode (INSTALLATION or PAT)
        hasSlackSigningSecret:
          type: boolean
          description: Whether Slack signing secret is configured
        hasSlackToken:
          type: boolean
          description: Whether Slack token is configured
        id:
          type: integer
          format: int64
          description: Unique identifier of the workspace
        installationId:
          type: integer
          format: int64
          description: "GitHub App installation ID, if linked"
        installationLinkedAt:
          type: string
          format: date-time
          description: Timestamp when the GitHub App installation was linked
        isPubliclyViewable:
          type: boolean
          description: Whether the workspace is publicly viewable without authentication
        leaderboardNotificationChannelId:
          type: string
          description: Slack channel ID for leaderboard notifications
        leaderboardNotificationEnabled:
          type: boolean
          description: Whether leaderboard notifications are enabled
        leaderboardNotificationTeam:
          type: string
          description: Team name for leaderboard notifications
        leaderboardScheduleDay:
          type: integer
          format: int32
          description: "Day of week for leaderboard notifications (1=Monday, 7=Sunday)"
          example: 1
        leaderboardScheduleTime:
          type: string
          description: Time for leaderboard notifications in HH:mm format
          example: 09:00
        status:
          type: string
          description: "Current lifecycle status of the workspace (PENDING, ACTIVE,\
            \ ARCHIVED)"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the workspace was last updated
        workspaceSlug:
          type: string
          description: URL-friendly identifier for the workspace
          example: my-workspace
      required:
      - accountLogin
      - createdAt
      - displayName
      - hasSlackSigningSecret
      - hasSlackToken
      - id
      - isPubliclyViewable
      - status
      - updatedAt
      - workspaceSlug
    WorkspaceListItem:
      type: object
      description: Summary information about a workspace for list views
      properties:
        accountLogin:
          type: string
          description: GitHub account login associated with this workspace
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the workspace was created
        displayName:
          type: string
          description: Human-readable name of the workspace
        id:
          type: integer
          format: int64
          description: Unique identifier of the workspace
        status:
          type: string
          description: "Current lifecycle status of the workspace (PENDING, ACTIVE,\
            \ ARCHIVED)"
        workspaceSlug:
          type: string
          description: URL-friendly identifier for the workspace
          example: my-workspace
      required:
      - accountLogin
      - createdAt
      - displayName
      - id
      - status
      - workspaceSlug
    WorkspaceMembership:
      type: object
      description: A user's membership in a workspace
      properties:
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the membership was created
        leaguePoints:
          type: integer
          format: int32
          description: League points earned by the user in this workspace
          example: 150
        role:
          type: string
          description: "Role of the user in this workspace (OWNER, ADMIN, MEMBER)"
          enum:
          - OWNER
          - ADMIN
          - MEMBER
        userId:
          type: integer
          format: int64
          description: Unique identifier of the user
        userLogin:
          type: string
          description: Login/username of the user
        userName:
          type: string
          description: Display name of the user
    WorkspaceTeamRepositorySettings:
      type: object
      description: Repository contribution visibility settings for a specific team
        within a workspace
      properties:
        hiddenFromContributions:
          type: boolean
          description: Whether contributions from this repository are hidden from
            leaderboard calculations
        repositoryId:
          type: integer
          format: int64
          description: The repository ID these settings apply to
        teamId:
          type: integer
          format: int64
          description: The team ID these settings apply to
        workspaceId:
          type: integer
          format: int64
          description: The workspace ID these settings belong to
      required:
      - hiddenFromContributions
      - repositoryId
      - teamId
      - workspaceId
    WorkspaceTeamSettings:
      type: object
      description: Team visibility settings for a specific workspace
      properties:
        hidden:
          type: boolean
          description: Whether the team is hidden in the leaderboard for this workspace
        teamId:
          type: integer
          format: int64
          description: The team ID these settings apply to
        workspaceId:
          type: integer
          format: int64
          description: The workspace ID these settings belong to
      required:
      - hidden
      - teamId
      - workspaceId
  securitySchemes:
    bearerAuth:
      bearerFormat: JWT
      description: JWT authentication via Keycloak. Obtain a token from your Keycloak
        instance.
      scheme: bearer
      type: http
