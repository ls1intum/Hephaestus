# Copy this file to .env and fill in the secrets before starting Keycloak locally or in production.
#
# IMPORTANT: After copying, run `docker compose down -v` to clear any existing Keycloak data,
# then `docker compose up` to apply your new configuration.

# =============================================================================
# PORT OVERRIDES (optional)
# =============================================================================
# Override host-side ports to avoid collisions with other services on your machine.
# Internal container ports remain unchanged; only the localhost binding moves.
#
# Default port assignments:
#
#   Service                 Default   Variable                  Notes
#   ─────────────────────── ───────── ───────────────────────── ──────────────────────────────
#   PostgreSQL              5432      POSTGRES_PORT             Docker host mapping
#   Keycloak                8081      KEYCLOAK_PORT             Docker host mapping (internal 8080)
#   Application server      8080      SERVER_PORT               Spring Boot server.port
#   Intelligence service    8000      INTELLIGENCE_SERVICE_PORT Tells app-server where to find it
#   Webapp (Vite)           4200      WEBAPP_PORT               Set in shell, not here (see below)
#
# IMPORTANT: WEBAPP_PORT is read by Vite at dev-server startup. Set it in your
# shell environment or webapp/.env, NOT here. If you change it, also set
# APPLICATION_HOST_URL so the server's CORS origin matches:
#
#   APPLICATION_HOST_URL=http://localhost:5200
#   WEBAPP_PORT=5200 npm -w webapp run dev
#
# IMPORTANT: INTELLIGENCE_SERVICE_PORT tells the application server where to
# connect. You must ALSO set PORT=<value> in server/intelligence-service/.env
# so the service itself listens on the same port.
#
#POSTGRES_PORT=5432
#KEYCLOAK_PORT=8081
#SERVER_PORT=8080
#INTELLIGENCE_SERVICE_PORT=8000
#APPLICATION_HOST_URL=http://localhost:4200

# GitHub OAuth application credentials used by Keycloak to broker logins.
# Create a GitHub OAuth App at https://github.com/settings/developers with callback URL:
#   http://localhost:8081/realms/hephaestus/broker/github/endpoint
#   (replace 8081 with your KEYCLOAK_PORT if overridden)
KEYCLOAK_GITHUB_CLIENT_ID=replace-with-github-client-id
KEYCLOAK_GITHUB_CLIENT_SECRET=replace-with-github-client-secret
KEYCLOAK_GITHUB_ADMIN_USERNAME=replace-with-github-username-with-admin-access

# Keycloak confidential client secret for the "hephaestus-confidential" client.
# This is used by the application to authenticate with Keycloak Admin API for role checks.
#
# For LOCAL DEVELOPMENT: Use the default value below. This matches the value configured
# in the realm import JSON and works out of the box.
#
# For PRODUCTION: Generate a secure random secret and update both this file and Keycloak.
KEYCLOAK_CLIENT_SECRET=hephaestus-dev-secret

# GITHUB_PAT for GitHub API authentication (as alternative for env variable)
#GITHUB_PAT=replace-with-github-pat