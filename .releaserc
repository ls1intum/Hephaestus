{
  "branches": [
    "main"
  ],
  "plugins": [
    [
      "@semantic-release/commit-analyzer",
      {
        "releaseRules": [
          {
            "breaking": true,
            "release": "major"
          },
          {
            "scope": "no-release",
            "release": false
          },
          {
            "scope": "ci",
            "release": false
          },
          {
            "scope": "config",
            "release": false
          },
          {
            "scope": "deps",
            "release": false
          },
          {
            "scope": "deps-dev",
            "release": false
          },
          {
            "scope": "scripts",
            "release": false
          },
          {
            "scope": "security",
            "release": false
          },
          {
            "scope": "docker",
            "release": false
          },
          {
            "scope": "docs",
            "release": false
          },
          {
            "type": "docs",
            "release": false
          },
          {
            "type": "style",
            "release": false
          },
          {
            "type": "refactor",
            "release": false
          },
          {
            "type": "test",
            "release": false
          },
          {
            "type": "build",
            "release": false
          },
          {
            "type": "ci",
            "release": false
          },
          {
            "type": "chore",
            "release": false
          }
        ],
        "parserOpts": {
          "noteKeywords": [
            "BREAKING CHANGE",
            "BREAKING CHANGES",
            "BREAKING"
          ],
          "breakingHeaderPattern": "^(\\w*)(?:\\(([\\w\\$\\.\\-\\*\\s]*)\\))?!: (.*)$",
          "headerPattern": "^(\\w*)(?:\\(([\\w\\$\\.\\-\\*\\s]*)\\))?!?: (.*)$"
        }
      }
    ],
    [
      "@semantic-release/release-notes-generator",
      {
        "preset": "conventionalcommits",
        "parserOpts": {
          "noteKeywords": [
            "BREAKING CHANGE",
            "BREAKING CHANGES",
            "BREAKING"
          ],
          "breakingHeaderPattern": "^(\\w*)(?:\\(([\\w\\$\\.\\-\\*\\s]*)\\))?!: (.*)$",
          "headerPattern": "^(\\w*)(?:\\(([\\w\\$\\.\\-\\*\\s]*)\\))?!?: (.*)$"
        },
        "writerOpts": {
          "commitsSort": [
            "subject",
            "scope"
          ]
        },
        "presetConfig": {
          "types": [
            {
              "type": "fix",
              "section": "ðŸ› Bug Fixes",
              "hidden": false
            },
            {
              "type": "feat",
              "section": "ðŸš€ Features",
              "hidden": false
            },
            {
              "type": "docs",
              "section": "ðŸ“š Documentation",
              "hidden": false
            },
            {
              "type": "style",
              "section": "ðŸ’Ž Styles",
              "hidden": true
            },
            {
              "type": "refactor",
              "section": "â™»ï¸ Code Refactoring",
              "hidden": false
            },
            {
              "type": "perf",
              "section": "âš¡ Performance Improvements",
              "hidden": false
            },
            {
              "type": "test",
              "section": "ðŸ§ª Tests",
              "hidden": true
            },
            {
              "type": "build",
              "section": "ðŸ›  Build System",
              "hidden": false
            },
            {
              "type": "ci",
              "section": "ðŸ”§ Continuous Integration",
              "hidden": true
            },
            {
              "type": "chore",
              "section": "ðŸ—ƒ Chores",
              "hidden": true
            },
            {
              "type": "revert",
              "section": "ðŸ”™ Reverts",
              "hidden": false
            }
          ]
        }
      }
    ],
    [
      "@semantic-release/changelog",
      {
        "changelogFile": "CHANGELOG.md",
        "changelogTitle": "# Changelog"
      }
    ],
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "./update_version.sh ${nextRelease.version}",
        "publishCmd": "echo 'Version ${nextRelease.version} has been released'"
      }
    ],
    [
      "@semantic-release/git",
      {
        "assets": [
          "CHANGELOG.md",
          "package.json",
          "package-lock.json",
          "webapp/package.json",
          "webapp/package-lock.json",
          "webapp/src/api/**/*",
          "server/application-server/pom.xml",
          "server/application-server/src/main/java/de/tum/in/www1/hephaestus/OpenAPIConfiguration.java",
          "server/application-server/src/main/java/de/tum/in/www1/hephaestus/intelligenceservice/**/*",
          "server/application-server/src/main/resources/application.yml",
          "server/application-server/openapi.yaml",
          "server/intelligence-service/package.json",
          "server/intelligence-service/openapi.yaml",
          "server/webhook-ingest/package.json"
        ],
        "message": "chore(release): ${nextRelease.version} [skip ci]"
      }
    ],
    [
      "@semantic-release/github",
      {
        "discussionCategoryName": "Announcements",
        "failTitle": "ðŸš¨ Automated Release Pipeline Failed",
        "failComment": "## Release Failure Report\n\nThe automated release pipeline for Hephaestus has encountered an error on branch `${branch.name}`.\n\n### Error Details\n${errors.map(err => `- **${err.pluginName}**: ${err.message}`).join('\\n')}\n\n### Next Steps\nOur team has been notified and will investigate this issue. You can track the resolution in this issue.\n\n---\n*This is an automated message from the Hephaestus release system.*",
        "labels": [
          "release-failure",
          "bug"
        ],
        "addReleases": "bottom",
        "releasedLabels": [
          "released"
        ]
      }
    ]
  ],
  "preset": "conventionalcommits"
}
