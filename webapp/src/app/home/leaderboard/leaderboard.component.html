<hlm-table>
  <hlm-trow>
    <hlm-th class="text-center">Rank</hlm-th>
    <hlm-th>Contributor</hlm-th>
    <hlm-th class="text-center">Score</hlm-th>
    <hlm-th>Activity</hlm-th>
  </hlm-trow>
  @for (entry of leaderboard(); track entry.githubName) {
    <hlm-trow>
      <hlm-td class="text-center">{{ entry.rank }}</hlm-td>
      <hlm-td class="py-2">
        <a href="https://github.com/{{ entry.githubName }}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 font-medium">
          <app-avatar>
            <app-avatar-image [src]="entry.avatarUrl ?? ''" [alt]="entry.name + '\'s avatar'" />
            <app-avatar-fallback>
              {{ entry.name?.slice(0, 1)?.toUpperCase() }}
            </app-avatar-fallback>
          </app-avatar>
          <span class="text-muted-foreground">{{ entry.name }}</span>
        </a>
      </hlm-td>
      <hlm-td class="text-center">{{ entry.score }}</hlm-td>
      <hlm-td class="py-2">
        <div class="flex items-center gap-2">
          <div class="flex items-center gap-1 text-github-muted-foreground" title="Total reviewed PRs">
            <ng-icon [svg]="octGitPullRequest" size="16" />
            {{ entry.numberOfReviewedPRs }}
          </div>
          <div class="flex items-center text-github-muted-foreground">
            <ng-icon [svg]="octChevronLeft" size="16" />
          </div>
          @if (entry.changesRequested && entry.changesRequested.length > 0) {
            <div class="flex items-center gap-1 text-github-danger-foreground" title="Changes Requested">
              <ng-icon [svg]="octFileDiff" size="16" />
              {{ entry.changesRequested.length }}
            </div>
          }
          @if (entry.approvals && entry.approvals.length > 0) {
            <div class="flex items-center gap-1 text-github-success-foreground" title="Approvals">
              <ng-icon [svg]="octCheck" size="16" />
              {{ entry.approvals.length }}
            </div>
          }
          @if (entry.comments && entry.comments.length > 0) {
            <div class="flex items-center gap-1 text-github-muted-foreground" title="Comments">
              <ng-icon [svg]="octComment" size="16" />
              {{ entry.comments.length }}
            </div>
          }
        </div>
      </hlm-td>
    </hlm-trow>
  }
</hlm-table>
