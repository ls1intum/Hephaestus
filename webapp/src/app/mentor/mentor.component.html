<div class="flex items-center justify-center space-y-4">
  <div class="md:max-h-dvh">
    @if (sessions.isLoading()) {
      <hlm-spinner />
    } @else if (sessions.isError()) {
      <div hlmAlert class="max-w-xl" variant="destructive">
        <lucide-angular [img]="CircleX" hlmAlertIcon />
        <h4 hlmAlertTitle>Something went wrong...</h4>
        <p hlmAlertDesc>Failed to load sessions. Please try again later.</p>
      </div>
    }
    @if (sessions.isSuccess()) {
      <div class="grid grid-cols-1 gap-x-5 md:grid-cols-4">
        @if (!sessions.data()) {
          <div class="col-span-4">
            <app-first-session-card (createSession)="this.createNewSession.mutate()"></app-first-session-card>
          </div>
        } @else {
          <app-sessions-card
            [sessions]="sessions.data()"
            [(selectedSessionId)]="selectedSessionId"
            (createNewSession)="this.createNewSession.mutate()"
            class="order-last md:order-none"
          ></app-sessions-card>
          <div class="flex flex-col md:col-span-3">
            @if (selectedSessionId() !== undefined) {
              <app-messages [messages]="selectedSessionMessages.data() ?? []" class="max-h-[calc(100dvh-200px)] overflow-y-scroll p-4 space-y-4" />
              <app-chat-input
                [isSending]="sendMessage.isPending()"
                (sendMessage)="sendMessage.mutate({ sessionId: selectedSessionId()!, message: $event })"
                class="border-t pt-4 px-4 sticky bottom-0 bg-white"
              ></app-chat-input>
            }
          </div>
        }
      </div>
    }
  </div>
</div>
