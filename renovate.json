{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "Renovate configuration for Hephaestus monorepo",
  "extends": [
    "config:best-practices",
    ":semanticCommits",
    ":separateMajorReleases",
    "group:monorepos",
    "group:recommended",
    "replacements:all",
    "workarounds:all",
    "docker:pinDigests",
    "helpers:pinGitHubActionDigests"
  ],
  "labels": [
    "dependencies"
  ],
  "assigneesFromCodeOwners": true,
  "prHourlyLimit": 4,
  "prConcurrentLimit": 10,
  "branchConcurrentLimit": 15,
  "rebaseWhen": "conflicted",
  "platformAutomerge": true,
  "automergeType": "pr",
  "automergeStrategy": "squash",
  "semanticCommits": "enabled",
  "semanticCommitScope": "deps",
  "semanticCommitType": "chore",
  "dependencyDashboard": true,
  "dependencyDashboardTitle": "ðŸ”„ Dependency Dashboard",
  "dependencyDashboardLabels": [
    "dependencies"
  ],
  "configWarningReuseIssue": false,
  "timezone": "Europe/Berlin",
  "schedule": [
    "before 9am on Monday"
  ],
  "prBodyColumns": [
    "Package",
    "Type",
    "Update",
    "Change"
  ],
  "prBodyNotes": [
    "ðŸ“¦ This PR was auto-generated by [Renovate](https://renovatebot.com).",
    "Review the changes, ensure CI passes, then merge."
  ],
  "postUpdateOptions": [
    "npmDedupe"
  ],
  "internalChecksFilter": "strict",
  "vulnerabilityAlerts": {
    "labels": [
      "security",
      "dependencies"
    ],
    "schedule": [
      "at any time"
    ],
    "minimumReleaseAge": null,
    "prPriority": 10,
    "automerge": false
  },
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": [
      "before 9am on Monday"
    ],
    "automerge": true
  },
  "packageRules": [
    {
      "description": "Automerge patch updates after stability check",
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "minimumReleaseAge": "3 days",
      "internalChecksFilter": "strict"
    },
    {
      "description": "Automerge minor updates after longer stability check",
      "matchUpdateTypes": [
        "minor"
      ],
      "automerge": true,
      "minimumReleaseAge": "7 days",
      "internalChecksFilter": "strict"
    },
    {
      "description": "Major updates require dashboard approval",
      "matchUpdateTypes": [
        "major"
      ],
      "dependencyDashboardApproval": true,
      "labels": [
        "dependencies",
        "breaking"
      ],
      "automerge": false,
      "minimumReleaseAge": "14 days"
    },
    {
      "description": "Application Server (Java/Spring)",
      "matchManagers": [
        "maven"
      ],
      "groupName": "Java dependencies",
      "semanticCommitType": "build",
      "labels": [
        "dependencies",
        "application-server"
      ]
    },
    {
      "description": "Intelligence Service (Python)",
      "matchManagers": [
        "poetry"
      ],
      "matchFileNames": [
        "server/intelligence-service/**"
      ],
      "groupName": "Intelligence Service dependencies",
      "labels": [
        "dependencies",
        "intelligence-service"
      ]
    },
    {
      "description": "Webhook Ingest (Python)",
      "matchManagers": [
        "poetry"
      ],
      "matchFileNames": [
        "server/webhook-ingest/**"
      ],
      "groupName": "Webhook Ingest dependencies",
      "labels": [
        "dependencies",
        "webhook-ingest"
      ]
    },
    {
      "description": "Webapp dependencies",
      "matchFileNames": [
        "webapp/package.json"
      ],
      "groupName": "Webapp dependencies",
      "labels": [
        "dependencies",
        "webapp"
      ]
    },
    {
      "description": "Documentation dependencies",
      "matchFileNames": [
        "docs/package.json"
      ],
      "groupName": "Documentation dependencies",
      "labels": [
        "dependencies",
        "documentation"
      ]
    },
    {
      "description": "Root monorepo tooling",
      "matchFileNames": [
        "package.json"
      ],
      "groupName": "Root tooling",
      "labels": [
        "dependencies"
      ]
    },
    {
      "description": "Spring Boot framework - keep aligned",
      "groupName": "Spring Boot",
      "matchPackageNames": [
        "/^org\\.springframework/"
      ]
    },
    {
      "description": "React ecosystem",
      "matchPackageNames": [
        "react",
        "react-dom",
        "@tanstack/**"
      ],
      "groupName": "React ecosystem"
    },
    {
      "description": "Testing libraries",
      "matchPackageNames": [
        "@testing-library/**",
        "vitest",
        "@vitest/**",
        "playwright",
        "@playwright/**"
      ],
      "groupName": "Testing libraries"
    },
    {
      "description": "Build tools",
      "matchPackageNames": [
        "typescript",
        "vite",
        "@vitejs/**",
        "esbuild"
      ],
      "groupName": "Build tools"
    },
    {
      "description": "Linting and formatting",
      "matchPackageNames": [
        "@biomejs/**",
        "prettier",
        "prettier-plugin-**"
      ],
      "groupName": "Linting and formatting"
    },
    {
      "description": "OpenAPI tooling",
      "matchPackageNames": [
        "@openapitools/**",
        "@hey-api/**"
      ],
      "groupName": "OpenAPI tools"
    },
    {
      "description": "GitHub Actions - automerge after CI",
      "matchManagers": [
        "github-actions"
      ],
      "groupName": "GitHub Actions",
      "automerge": true,
      "labels": [
        "dependencies",
        "ci"
      ]
    },
    {
      "description": "Docker images (Dockerfiles and compose)",
      "matchManagers": [
        "dockerfile",
        "docker-compose"
      ],
      "groupName": "Docker images",
      "labels": [
        "dependencies",
        "infrastructure"
      ]
    },
    {
      "description": "Node.js version - manual review",
      "matchDepNames": [
        "node"
      ],
      "matchManagers": [
        "nvm"
      ],
      "automerge": false,
      "labels": [
        "dependencies",
        "infrastructure"
      ]
    },
    {
      "description": "Postgres major version - manual review",
      "matchPackageNames": [
        "postgres"
      ],
      "matchUpdateTypes": [
        "major"
      ],
      "automerge": false,
      "dependencyDashboardApproval": true,
      "labels": [
        "dependencies",
        "infrastructure",
        "breaking"
      ]
    }
  ],
  "ignorePaths": [
    "**/node_modules/**",
    "**/target/**",
    "**/.venv/**",
    "**/dist/**",
    "**/build/**",
    "keycloakify/**",
    "chrome-extension/**"
  ]
}
