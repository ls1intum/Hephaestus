{
  "name": "hephaestus",
  "private": true,
  "workspaces": [
    "webapp",
    "server/intelligence-service",
    "server/webhook-ingest"
  ],
  "scripts": {
    "generate:api:application-server:clean": "shx rm -rf webapp/src/api",
    "generate:api:application-server:specs": "cd server/application-server && sh -c 'if command -v docker >/dev/null 2>&1 && docker info >/dev/null 2>&1; then ./mvnw verify -DskipTests=true -Dapp.profiles=specs; else SPRING_DOCKER_COMPOSE_ENABLED=false ./mvnw verify -DskipTests=true -Dapp.profiles=specs; fi'",
    "generate:api:application-server:client": "npm run generate:api:application-server:clean && npm -w webapp run openapi-ts",
    "generate:api:application-server": "npm run generate:api:application-server:specs && npm run generate:api:application-server:client",
    "generate:api:intelligence-service:clean": "shx rm -rf server/application-server/src/main/java/de/tum/in/www1/hephaestus/intelligenceservice",
    "generate:api:intelligence-service:specs": "npm -w server/intelligence-service run openapi:export",
    "generate:api:intelligence-service:client": "npx openapi-generator-cli generate -i server/intelligence-service/openapi.yaml -g java --library resttemplate --api-package de.tum.in.www1.hephaestus.intelligenceservice.api --model-package de.tum.in.www1.hephaestus.intelligenceservice.model --invoker-package de.tum.in.www1.hephaestus.intelligenceservice --additional-properties useJakartaEe=true,performBeanValidation=true,hideGenerationTimestamp=true,openApiNullable=true,serializationLibrary=jackson --package-name de.tum.in.www1.hephaestus.intelligenceservice -o tmp/java-client && shx mkdir -p server/application-server/src/main/java/de/tum/in/www1/hephaestus && shx cp -r tmp/java-client/src/main/java/de/tum/in/www1/hephaestus/intelligenceservice server/application-server/src/main/java/de/tum/in/www1/hephaestus/ && shx rm -rf tmp && node --import tsx scripts/postprocess-openapi-java.ts",
    "generate:api:intelligence-service": "npm run generate:api:intelligence-service:clean && npm run generate:api:intelligence-service:specs && npm run generate:api:intelligence-service:client",
    "generate:api": "npm run generate:api:intelligence-service && npm run generate:api:application-server",
    "format:java": "prettier --write server/application-server/src/**/*.java --config-precedence prefer-file --config server/application-server/.prettierrc.yaml --ignore-path server/application-server/.prettierignore",
    "format:java:check": "prettier --check server/application-server/src/**/*.java --config-precedence prefer-file --config server/application-server/.prettierrc.yaml --ignore-path server/application-server/.prettierignore",
    "format:intelligence-service": "npm -w server/intelligence-service run format",
    "format:intelligence-service:check": "npm -w server/intelligence-service run format:check",
    "lint:intelligence-service": "npm -w server/intelligence-service run lint",
    "typecheck:intelligence-service": "npm -w server/intelligence-service run typecheck",
    "check:intelligence-service": "npm run format:intelligence-service:check && npm run typecheck:intelligence-service",
    "format:webhook-ingest": "npm -w server/webhook-ingest run format",
    "format:webhook-ingest:check": "npm -w server/webhook-ingest run format:check",
    "lint:webhook-ingest": "npm -w server/webhook-ingest run lint",
    "typecheck:webhook-ingest": "npm -w server/webhook-ingest run typecheck",
    "check:webhook-ingest": "npm run format:webhook-ingest:check && npm run lint:webhook-ingest && npm run typecheck:webhook-ingest",
    "test:webhook-ingest": "npm -w server/webhook-ingest run test",
    "format:webapp": "npm -w webapp run format",
    "format:webapp:check": "npm -w webapp run format:check",
    "lint:webapp": "npm -w webapp run lint",
    "lint:webapp:fix": "npm -w webapp run lint:fix",
    "check:webapp": "npm -w webapp run check",
    "check:webapp:fix": "npm -w webapp run check:fix",
    "typecheck:webapp": "npm -w webapp run typecheck",
    "ci:webapp": "npm -w webapp run ci",
    "test:webapp": "npm -w webapp run test",
    "build:webapp": "npm -w webapp run build",
    "nats:extract-examples": "node --import tsx scripts/nats-extract-examples.ts",
    "typecheck:scripts": "tsc -p scripts/tsconfig.json --noEmit",
    "format:server": "run-s format:java format:webhook-ingest",
    "format:server:check": "run-s format:java:check format:webhook-ingest:check",
    "lint:server": "run-s format:java:check lint:webhook-ingest",
    "check:server": "npm run format:server:check && npm run lint:server",
    "format:client": "npm run format:webapp",
    "format:client:check": "npm run format:webapp:check",
    "lint:client": "run-s -c check:webapp typecheck:webapp",
    "check:client": "run-s check:webapp typecheck:webapp",
    "format": "npm run format:server && npm run format:client && npm run format:intelligence-service",
    "format:check": "npm run format:server:check && npm run format:client:check && npm run format:intelligence-service:check",
    "lint": "run-s lint:server lint:client lint:intelligence-service",
    "check": "run-s check:server check:client check:intelligence-service typecheck:scripts",
    "typecheck": "npm run typecheck:webapp && npm run typecheck:intelligence-service && npm run typecheck:webhook-ingest && npm run typecheck:scripts",
    "ci": "run-s check:server ci:webapp typecheck:webapp check:intelligence-service check:webhook-ingest typecheck:scripts",
    "db:draft-changelog": "scripts/db-utils.sh draft-changelog",
    "db:generate-erd-docs": "scripts/db-utils.sh generate-erd",
    "db:generate-models:intelligence-service": "npm -w server/intelligence-service run db:introspect",
    "docs:dev": "cd docs && npm run start",
    "docs:build": "cd docs && npm run build",
    "docs:serve": "cd docs && npm run serve",
    "docs:lint": "cd docs && npm run lint",
    "prepare": "husky || true"
  },
  "devDependencies": {
    "@biomejs/biome": "2.3.10",
    "@commitlint/cli": "19.8.1",
    "@commitlint/config-conventional": "19.8.1",
    "@nats-io/jetstream": "3.3.0",
    "@nats-io/transport-node": "3.3.0",
    "@openapitools/openapi-generator-cli": "2.16.3",
    "@types/node": "25.0.3",
    "@types/pg": "8.16.0",
    "commander": "14.0.2",
    "husky": "9.1.7",
    "npm-run-all2": "8.0.4",
    "patch-package": "8.0.1",
    "pg": "8.16.3",
    "prettier": "3.7.4",
    "prettier-plugin-java": "2.7.7",
    "shx": "0.3.4",
    "tsx": "4.21.0",
    "typescript": "5.9.3"
  },
  "engines": {
    "node": ">=22.0"
  },
  "overrides": {
    "vitest": "4.0.16",
    "@vitest/browser": "4.0.16",
    "@vitest/runner": "4.0.16"
  }
}
