{
  "name": "hephaestus",
  "private": true,
  "workspaces": [
    "webapp"
  ],
  "scripts": {
    "generate:api:application-server:clean": "shx rm -rf webapp/src/api",
    "generate:api:application-server:specs": "cd server/application-server && sh -c 'if command -v docker >/dev/null 2>&1 && docker info >/dev/null 2>&1; then ./mvnw verify -DskipTests=true -Dapp.profiles=specs; else SPRING_DOCKER_COMPOSE_ENABLED=false ./mvnw verify -DskipTests=true -Dapp.profiles=specs; fi'",
    "generate:api:application-server:client": "npm run generate:api:application-server:clean && npm -w webapp run openapi-ts",
    "generate:api:application-server": "npm run generate:api:application-server:specs && npm run generate:api:application-server:client",
    "generate:api:intelligence-service:clean": "shx rm -rf server/application-server/src/main/java/de/tum/in/www1/hephaestus/intelligenceservice",
    "generate:api:intelligence-service:specs": "cd server/intelligence-service && poetry run openapi",
    "generate:api:intelligence-service:client": "npx openapi-generator-cli generate -i server/intelligence-service/openapi.yaml -g java --library resttemplate --api-package de.tum.in.www1.hephaestus.intelligenceservice.api --model-package de.tum.in.www1.hephaestus.intelligenceservice.model --invoker-package de.tum.in.www1.hephaestus.intelligenceservice --additional-properties useJakartaEe=true,performBeanValidation=true,hideGenerationTimestamp=true,openApiNullable=true,serializationLibrary=jackson --package-name de.tum.in.www1.hephaestus.intelligenceservice -o tmp/java-client && shx mkdir -p server/application-server/src/main/java/de/tum/in/www1/hephaestus && shx cp -r tmp/java-client/src/main/java/de/tum/in/www1/hephaestus/intelligenceservice server/application-server/src/main/java/de/tum/in/www1/hephaestus/ && shx rm -rf tmp && node scripts/postprocess-openapi-java.mjs",
    "generate:api:intelligence-service": "npm run generate:api:intelligence-service:clean && npm run generate:api:intelligence-service:specs && npm run generate:api:intelligence-service:client",
    "generate:api": "npm run generate:api:intelligence-service && npm run generate:api:application-server",
    "gql:schema:update": "scripts/refresh-github-schema.sh",
    "gql:validate": "graphql-inspector validate 'server/application-server/src/main/resources/github/graphql/operations/**/*.graphql' server/application-server/src/main/resources/github/graphql/schema/github-public-schema.graphql",
    "format:java": "prettier --write server/application-server/src/**/*.java --config-precedence prefer-file --config server/application-server/.prettierrc.yaml --ignore-path server/application-server/.prettierignore",
    "lint:java": "prettier --check server/application-server/src/**/*.java --config-precedence prefer-file --config server/application-server/.prettierrc.yaml --ignore-path server/application-server/.prettierignore",
    "format:py:intelligence-service": "cd server/intelligence-service/ && poetry run black .",
    "lint:py:intelligence-service": "cd server/intelligence-service/ && poetry run flake8 .",
    "format:py:webhook-ingest": "cd server/webhook-ingest/ && poetry run black .",
    "lint:py:webhook-ingest": "cd server/webhook-ingest/ && poetry run flake8 .",
    "bootstrap:py": "bash scripts/bootstrap-dev.sh",
    "format:ts": "npm exec -w webapp biome format --write",
    "lint:ts": "npm exec -w webapp biome check",
    "typecheck:ts": "npm exec -w webapp tsc --noEmit",
    "format:server": "npm run bootstrap:py && run-s format:java format:py:intelligence-service format:py:webhook-ingest",
    "lint:server": "npm run bootstrap:py && run-s lint:java lint:py:intelligence-service lint:py:webhook-ingest",
    "format:client": "npm run format:ts",
    "lint:client": "run-s -c lint:ts typecheck:ts",
    "format": "npm run format:server && npm run format:client",
    "lint": "run-s lint:server lint:client",
    "db:draft-changelog": "scripts/db-utils.sh draft-changelog",
    "db:generate-erd-docs": "scripts/db-utils.sh generate-erd",
    "db:generate-models:intelligence-service": "scripts/db-utils.sh generate-models-intelligence-service"
  },
  "devDependencies": {
    "@graphql-inspector/cli": "^5.0.8",
    "@openapitools/openapi-generator-cli": "2.16.3",
    "graphql": "^16.9.0",
    "npm-run-all": "^4.1.5",
    "patch-package": "^8.0.1",
    "prettier": "3.5.1",
    "prettier-plugin-java": "2.6.7",
    "prettier-plugin-kotlin": "2.1.0",
    "shx": "0.3.4"
  }
}
