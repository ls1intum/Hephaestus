---
config:
    layout: elk
---
erDiagram
    %% Generated automatically from PostgreSQL database schema
    %% using scripts/generate-mermaid-erd.ts
    %% To regenerate: npm run db:generate-erd-docs

    direction LR

    ActivityEvent {
        UUID id PK
        VARCHAR(255) event_key UK "NOT NULL"
        VARCHAR(64) event_type "NOT NULL"
        TIMESTAMPTZ occurred_at "NOT NULL"
        BIGINT actor_id FK
        BIGINT workspace_id FK,UK "NOT NULL"
        BIGINT repository_id FK
        VARCHAR(32) target_type
        BIGINT target_id
        DOUBLE xp "NOT NULL"
        TIMESTAMPTZ ingested_at "NOT NULL"
    }

    BadPracticeDetection {
        BIGINT id PK
        TIMESTAMPTZ detected_at
        VARCHAR(255) trace_id
        BIGINT pullrequest_id FK
        TEXT summary
    }

    BadPracticeFeedback {
        BIGINT id PK
        VARCHAR(255) type
        BIGINT pull_request_bad_practice_id FK
        TIMESTAMPTZ created_at
        TEXT explanation
    }

    ChatMessage {
        UUID id PK
        TIMESTAMPTZ created_at "NOT NULL"
        JSONB metadata
        VARCHAR(16) role "NOT NULL"
        UUID parent_message_id FK
        UUID thread_id FK "NOT NULL"
    }

    ChatMessagePart {
        UUID message_id PK,FK
        INTEGER order_index PK
        JSONB content
        VARCHAR(128) original_type
        VARCHAR(32) type "NOT NULL"
    }

    ChatMessageVote {
        UUID message_id PK
        TIMESTAMPTZ created_at "NOT NULL"
        BOOLEAN is_upvoted "NOT NULL"
        TIMESTAMPTZ updated_at "NOT NULL"
    }

    ChatThread {
        UUID id PK
        TIMESTAMPTZ created_at "NOT NULL"
        TEXT title
        UUID selected_leaf_message_id FK,UK
        BIGINT user_id FK
        BIGINT workspace_id FK "NOT NULL"
    }

    CommitContributor {
        BIGINT id PK
        BIGINT commit_id FK,UK "NOT NULL"
        BIGINT user_id FK
        VARCHAR(32) role UK "NOT NULL"
        VARCHAR(255) name
        VARCHAR(255) email UK "NOT NULL"
        INTEGER ordinal "NOT NULL"
    }

    CommitFileChange {
        BIGINT id PK
        VARCHAR(1024) filename "NOT NULL"
        VARCHAR(32) change_type "NOT NULL"
        INTEGER additions "NOT NULL"
        INTEGER deletions "NOT NULL"
        INTEGER changes "NOT NULL"
        VARCHAR(1024) previous_filename
        BIGINT commit_id FK "NOT NULL"
    }

    CommitPullRequest {
        BIGINT commit_id PK,FK
        BIGINT pull_request_id PK,FK
    }

    Discussion {
        BIGINT id PK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
        INTEGER number UK "NOT NULL"
        INTEGER number UK "NOT NULL"
        VARCHAR(1024) title "NOT NULL"
        TEXT body
        VARCHAR(512) html_url "NOT NULL"
        VARCHAR(16) state "NOT NULL"
        VARCHAR(32) state_reason
        BOOLEAN is_locked "NOT NULL"
        VARCHAR(32) active_lock_reason
        TIMESTAMPTZ closed_at
        TIMESTAMPTZ answer_chosen_at
        INTEGER comment_count "NOT NULL"
        TIMESTAMPTZ last_sync_at
        BIGINT repository_id FK,UK
        BIGINT repository_id FK,UK
        BIGINT author_id FK
        VARCHAR(128) category_id FK
        BIGINT answer_chosen_by_id FK
        BIGINT answer_comment_id FK,UK
    }

    DiscussionCategory {
        VARCHAR(128) id PK
        VARCHAR(255) name "NOT NULL"
        VARCHAR(128) slug UK "NOT NULL"
        VARCHAR(128) slug UK "NOT NULL"
        VARCHAR(32) emoji
        TEXT description
        BOOLEAN is_answerable "NOT NULL"
        BIGINT repository_id FK,UK
        BIGINT repository_id FK,UK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
    }

    DiscussionComment {
        BIGINT id PK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
        TEXT body
        VARCHAR(512) html_url "NOT NULL"
        BOOLEAN is_answer "NOT NULL"
        BOOLEAN is_minimized "NOT NULL"
        VARCHAR(64) minimized_reason
        VARCHAR(32) author_association
        TIMESTAMPTZ last_sync_at
        BIGINT discussion_id FK
        BIGINT author_id FK
        BIGINT parent_comment_id FK
    }

    DiscussionLabel {
        BIGINT discussion_id PK,FK
        BIGINT label_id PK,FK
    }

    Document {
        UUID id PK
        INTEGER version_number PK
        TEXT content
        TIMESTAMPTZ created_at "NOT NULL"
        VARCHAR(255) kind "NOT NULL"
        VARCHAR(255) title "NOT NULL"
        BIGINT user_id FK "NOT NULL"
        BIGINT workspace_id FK "NOT NULL"
    }

    GitCommit {
        BIGINT id PK
        VARCHAR(40) sha UK "NOT NULL"
        VARCHAR(1024) message "NOT NULL"
        TEXT message_body
        VARCHAR(512) html_url
        TIMESTAMPTZ authored_at "NOT NULL"
        TIMESTAMPTZ committed_at "NOT NULL"
        INTEGER additions "NOT NULL"
        INTEGER deletions "NOT NULL"
        INTEGER changed_files "NOT NULL"
        VARCHAR(255) author_email
        VARCHAR(255) committer_email
        BOOLEAN signature_valid
        BOOLEAN authored_by_committer
        BOOLEAN committed_via_web
        INTEGER parent_count
        TIMESTAMPTZ last_sync_at
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
        BIGINT repository_id FK,UK "NOT NULL"
        BIGINT author_id FK
        BIGINT committer_id FK
        VARCHAR(32) signature_state
        BOOLEAN signature_was_signed_by_github
        VARCHAR(255) signature_signer_login
        TEXT parent_shas
        VARCHAR(32) status_check_rollup_state
        VARCHAR(255) on_behalf_of_login
    }

    Issue {
        VARCHAR(31) issue_type "NOT NULL"
        BIGINT id PK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
        TIMESTAMPTZ closed_at
        INTEGER comments_count "NOT NULL"
        VARCHAR(255) html_url
        BOOLEAN is_locked "NOT NULL"
        INTEGER number UK "NOT NULL"
        VARCHAR(255) state
        VARCHAR(1024) title
        INTEGER additions
        INTEGER changed_files
        INTEGER commits
        INTEGER deletions
        BOOLEAN is_draft
        BOOLEAN is_merged
        TIMESTAMPTZ merged_at
        BIGINT author_id FK
        BIGINT milestone_id FK
        BIGINT repository_id FK,UK
        BIGINT merged_by_id FK
        TIMESTAMPTZ last_sync_at
        VARCHAR(32) state_reason
        TEXT body
        BIGINT parent_issue_id FK
        INTEGER sub_issues_total
        INTEGER sub_issues_completed
        INTEGER sub_issues_percent_completed
        VARCHAR(128) issue_type_id FK
        VARCHAR(255) merge_state_status
        BOOLEAN mergeable
        VARCHAR(255) review_decision
        VARCHAR(255) head_ref_name
        VARCHAR(40) head_ref_oid
        VARCHAR(255) base_ref_name
        VARCHAR(40) base_ref_oid
    }

    IssueAssignee {
        BIGINT issue_id PK,FK
        BIGINT user_id PK,FK
    }

    IssueBlocking {
        BIGINT blocked_issue_id PK,FK
        BIGINT blocking_issue_id PK,FK
    }

    IssueComment {
        BIGINT id PK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
        VARCHAR(255) author_association
        VARCHAR(255) html_url
        BIGINT author_id FK
        BIGINT issue_id FK
        TEXT body
    }

    IssueLabel {
        BIGINT issue_id PK,FK
        BIGINT label_id PK,FK
    }

    IssueType {
        VARCHAR(128) id PK
        VARCHAR(128) name "NOT NULL"
        TEXT description
        VARCHAR(20) color "NOT NULL"
        BOOLEAN is_enabled "NOT NULL"
        BIGINT organization_id FK "NOT NULL"
        TIMESTAMPTZ last_sync_at
    }

    Label {
        BIGINT id PK
        VARCHAR(255) color
        VARCHAR(255) description
        VARCHAR(255) name UK
        BIGINT repository_id FK,UK
        TIMESTAMPTZ last_sync_at
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
    }

    Milestone {
        BIGINT id PK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
        TIMESTAMPTZ closed_at
        TIMESTAMPTZ due_on
        VARCHAR(255) html_url
        INTEGER number UK "NOT NULL"
        VARCHAR(255) state
        VARCHAR(255) title
        BIGINT creator_id FK
        BIGINT repository_id FK,UK
        TEXT description
        INTEGER closed_issues_count "NOT NULL"
        INTEGER open_issues_count "NOT NULL"
        TIMESTAMPTZ last_sync_at
    }

    Organization {
        BIGINT id PK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
        VARCHAR(255) avatar_url
        BIGINT github_id UK "NOT NULL"
        VARCHAR(255) html_url
        VARCHAR(255) login UK "NOT NULL"
        VARCHAR(255) name
        TIMESTAMPTZ last_sync_at
    }

    OrganizationMembership {
        BIGINT organization_id PK
        BIGINT user_id PK
        VARCHAR(32) role
    }

    Project {
        BIGINT id PK
        VARCHAR(64) node_id UK
        VARCHAR(32) owner_type UK "NOT NULL"
        BIGINT owner_id UK "NOT NULL"
        INTEGER number UK "NOT NULL"
        VARCHAR(256) title
        TEXT short_description
        TEXT readme
        BOOLEAN template "NOT NULL"
        VARCHAR(512) url
        BOOLEAN closed "NOT NULL"
        TIMESTAMPTZ closed_at
        BOOLEAN is_public "NOT NULL"
        BIGINT creator_id FK
        TIMESTAMPTZ last_sync_at
        VARCHAR(256) item_sync_cursor
        TIMESTAMPTZ items_synced_at
        VARCHAR(256) field_sync_cursor
        TIMESTAMPTZ fields_synced_at
        VARCHAR(256) status_update_sync_cursor
        TIMESTAMPTZ status_updates_synced_at
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
    }

    ProjectField {
        VARCHAR(64) id PK
        BIGINT project_id FK,UK "NOT NULL"
        VARCHAR(256) name UK "NOT NULL"
        VARCHAR(32) data_type "NOT NULL"
        JSONB options
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
    }

    ProjectFieldValue {
        BIGINT id PK
        BIGINT item_id FK,UK "NOT NULL"
        VARCHAR(64) field_id FK,UK "NOT NULL"
        TEXT text_value
        DOUBLE number_value
        DATE date_value
        VARCHAR(64) single_select_option_id
        VARCHAR(64) iteration_id
        TIMESTAMPTZ updated_at
    }

    ProjectItem {
        BIGINT id PK
        VARCHAR(64) node_id UK
        BIGINT project_id FK,UK "NOT NULL"
        VARCHAR(32) content_type "NOT NULL"
        BIGINT issue_id FK
        BIGINT content_database_id
        VARCHAR(1024) draft_title
        TEXT draft_body
        BOOLEAN archived "NOT NULL"
        BIGINT creator_id FK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
    }

    ProjectStatusUpdate {
        BIGINT id PK
        VARCHAR(64) node_id UK
        BIGINT project_id FK "NOT NULL"
        TEXT body
        TEXT body_html
        DATE start_date
        DATE target_date
        VARCHAR(32) status
        BIGINT creator_id FK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
    }

    PullRequestBadPractice {
        BIGINT id PK
        VARCHAR(255) title
        BIGINT pullrequest_id FK
        VARCHAR(32) state
        TIMESTAMPTZ detected_at
        TIMESTAMPTZ updated_at
        VARCHAR(32) user_state
        VARCHAR(32) detection_pullrequest_lifecycle_state
        VARCHAR(255) detection_trace_id
        BIGINT bad_practice_detection_id FK
        TEXT description
    }

    PullRequestRequestedReviewer {
        BIGINT pull_request_id PK,FK
        BIGINT user_id PK,FK
    }

    PullRequestReview {
        BIGINT id PK
        VARCHAR(255) commit_id
        VARCHAR(255) html_url
        BOOLEAN is_dismissed "NOT NULL"
        VARCHAR(255) state
        TIMESTAMPTZ submitted_at
        BIGINT author_id FK
        BIGINT pull_request_id FK
        TEXT body
        TIMESTAMP created_at
        TIMESTAMP updated_at
        BOOLEAN author_can_push_to_repository
    }

    PullRequestReviewComment {
        BIGINT id PK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
        VARCHAR(255) author_association
        VARCHAR(255) commit_id
        VARCHAR(255) html_url
        INTEGER line "NOT NULL"
        VARCHAR(255) original_commit_id
        INTEGER original_line "NOT NULL"
        INTEGER original_start_line
        VARCHAR(255) path
        INTEGER start_line
        BIGINT author_id FK
        BIGINT pull_request_id FK
        BIGINT review_id FK
        BIGINT thread_id FK "NOT NULL"
        BIGINT in_reply_to_id FK
        TEXT body
        TEXT diff_hunk
        BOOLEAN outdated
    }

    PullRequestReviewThread {
        BIGINT id PK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
        VARCHAR(20) state "NOT NULL"
        BIGINT pull_request_id FK "NOT NULL"
        BIGINT root_comment_id FK,UK
        VARCHAR(128) node_id
        TEXT path
        INTEGER line
        INTEGER start_line
        VARCHAR(16) side
        VARCHAR(16) start_side
        BOOLEAN outdated
        BOOLEAN collapsed
        BIGINT resolved_by_id FK
    }

    Repository {
        BIGINT id PK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
        VARCHAR(255) default_branch
        TEXT description
        VARCHAR(512) html_url
        BOOLEAN is_archived "NOT NULL"
        BOOLEAN is_disabled "NOT NULL"
        BOOLEAN is_private "NOT NULL"
        VARCHAR(255) name
        VARCHAR(150) name_with_owner UK
        TIMESTAMPTZ pushed_at
        VARCHAR(255) visibility
        BIGINT organization_id FK
        TIMESTAMPTZ last_sync_at
        BOOLEAN has_discussions_enabled "NOT NULL"
    }

    RepositoryCollaborator {
        BIGINT repository_id PK,FK
        BIGINT user_id PK,FK
        VARCHAR(32) permission "NOT NULL"
    }

    RepositoryToMonitor {
        BIGINT id PK
        TIMESTAMPTZ labels_synced_at
        TIMESTAMPTZ milestones_synced_at
        VARCHAR(255) name_with_owner
        TIMESTAMPTZ repository_synced_at
        BIGINT workspace_id FK
        TIMESTAMPTZ backfill_last_run_at
        TIMESTAMPTZ collaborators_synced_at
        VARCHAR(255) issue_sync_cursor
        VARCHAR(255) pull_request_sync_cursor
        INTEGER issue_backfill_high_water_mark
        INTEGER issue_backfill_checkpoint
        INTEGER pull_request_backfill_high_water_mark
        INTEGER pull_request_backfill_checkpoint
        VARCHAR(255) discussion_sync_cursor
        TIMESTAMPTZ issues_synced_at
        TIMESTAMPTZ pull_requests_synced_at
        TIMESTAMPTZ discussions_synced_at
    }

    Team {
        BIGINT id PK
        VARCHAR(255) name UK
        TIMESTAMPTZ created_at
        TEXT description
        VARCHAR(512) html_url
        TIMESTAMPTZ last_sync_at
        VARCHAR(255) organization UK
        BIGINT parent_id
        VARCHAR(32) privacy
        TIMESTAMPTZ updated_at
    }

    TeamMembership {
        VARCHAR(32) role
        BIGINT user_id PK,FK
        BIGINT team_id PK,FK
    }

    TeamRepositoryPermission {
        VARCHAR(32) permission "NOT NULL"
        BIGINT repository_id PK,FK
        BIGINT team_id PK,FK
    }

    User {
        BIGINT id PK
        TIMESTAMPTZ created_at
        TIMESTAMPTZ updated_at
        VARCHAR(255) avatar_url
        VARCHAR(255) email
        VARCHAR(255) html_url
        VARCHAR(255) login
        VARCHAR(255) name
        VARCHAR(255) type
    }

    UserPreference {
        BIGINT id PK
        BIGINT user_id FK,UK "NOT NULL"
        BOOLEAN notifications_enabled "NOT NULL"
        BOOLEAN participate_in_research "NOT NULL"
    }

    Workspace {
        BIGINT id PK
        TIMESTAMPTZ users_synced_at
        VARCHAR(120) account_login
        VARCHAR(255) git_provider_mode
        VARCHAR(255) github_repository_selection
        BIGINT installation_id
        TIMESTAMPTZ installation_linked_at
        BIGINT organization_id FK,UK
        TEXT personal_access_token
        VARCHAR(10) account_type "NOT NULL"
        TIMESTAMPTZ created_at "NOT NULL"
        VARCHAR(120) display_name "NOT NULL"
        BOOLEAN is_publicly_viewable "NOT NULL"
        VARCHAR(100) leaderboard_notification_channel_id
        BOOLEAN leaderboard_notification_enabled
        VARCHAR(100) leaderboard_notification_team
        INTEGER leaderboard_schedule_day
        VARCHAR(10) leaderboard_schedule_time
        TEXT slack_signing_secret
        TEXT slack_token
        VARCHAR(64) slug UK "NOT NULL"
        VARCHAR(20) status "NOT NULL"
        TIMESTAMPTZ updated_at
        TIMESTAMPTZ members_synced_at
        TIMESTAMPTZ teams_synced_at
        TIMESTAMPTZ sub_issues_synced_at
        TIMESTAMPTZ issue_types_synced_at
        TIMESTAMPTZ issue_dependencies_synced_at
    }

    WorkspaceMembership {
        TIMESTAMPTZ created_at "NOT NULL"
        INTEGER league_points "NOT NULL"
        VARCHAR(16) role "NOT NULL"
        BIGINT user_id PK,FK
        BIGINT workspace_id PK,FK
    }

    WorkspaceSlugHistory {
        BIGINT id PK
        TIMESTAMPTZ changed_at "NOT NULL"
        VARCHAR(64) new_slug "NOT NULL"
        VARCHAR(64) old_slug "NOT NULL"
        TIMESTAMPTZ redirect_expires_at
        BIGINT workspace_id FK "NOT NULL"
    }

    WorkspaceTeamLabelFilter {
        BIGINT workspace_id PK,FK
        BIGINT team_id PK,FK
        BIGINT label_id PK,FK
    }

    WorkspaceTeamRepositorySetting {
        BIGINT workspace_id PK,FK
        BIGINT team_id PK,FK
        BIGINT repository_id PK,FK
        BOOLEAN hidden_from_contributions "NOT NULL"
    }

    WorkspaceTeamSetting {
        BIGINT workspace_id PK,FK
        BIGINT team_id PK,FK
        BOOLEAN hidden "NOT NULL"
    }

    %% Relationships
    %% One-to-One relationships
    Workspace ||--|| ActivityEvent : has
    ChatMessage ||--|| ChatMessagePart : has
    ChatMessage ||--|| ChatThread : references
    GitCommit ||--|| CommitContributor : has
    DiscussionComment ||--|| Discussion : references
    Repository ||--|| Discussion : has
    Repository ||--|| DiscussionCategory : has
    Repository ||--|| GitCommit : has
    Repository ||--|| Issue : has
    Repository ||--|| Label : labeled
    Repository ||--|| Milestone : has
    Project ||--|| ProjectField : has
    ProjectField ||--|| ProjectFieldValue : has
    ProjectItem ||--|| ProjectFieldValue : has
    Project ||--|| ProjectItem : has
    PullRequestReviewComment ||--|| PullRequestReviewThread : reviewed
    User ||--|| UserPreference : has
    Organization ||--|| Workspace : has
    User ||--|| WorkspaceMembership : belongs_to
    Workspace ||--|| WorkspaceMembership : belongs_to

    %% One-to-Many relationships
    User ||--o{ ActivityEvent : references
    Repository ||--o{ ActivityEvent : has
    Issue ||--o{ BadPracticeDetection : references
    PullRequestBadPractice ||--o{ BadPracticeFeedback : has
    ChatMessage ||--o{ ChatMessage : references
    ChatThread ||--o{ ChatMessage : has
    User ||--o{ ChatThread : has
    Workspace ||--o{ ChatThread : has
    User ||--o{ CommitContributor : has
    GitCommit ||--o{ CommitFileChange : has
    User ||--o{ Discussion : references
    User ||--o{ Discussion : authored_by
    DiscussionCategory ||--o{ Discussion : has
    User ||--o{ DiscussionComment : commented_on
    Discussion ||--o{ DiscussionComment : commented_on
    DiscussionComment ||--o{ DiscussionComment : commented_on
    User ||--o{ Document : has
    Workspace ||--o{ Document : has
    User ||--o{ GitCommit : authored_by
    User ||--o{ GitCommit : references
    User ||--o{ Issue : authored_by
    IssueType ||--o{ Issue : has
    User ||--o{ Issue : merged_by
    Milestone ||--o{ Issue : has
    Issue ||--o{ Issue : has
    User ||--o{ IssueComment : commented_on
    Issue ||--o{ IssueComment : commented_on
    Organization ||--o{ IssueType : has
    User ||--o{ Milestone : created_by
    User ||--o{ Project : created_by
    User ||--o{ ProjectItem : created_by
    Issue ||--o{ ProjectItem : has
    User ||--o{ ProjectStatusUpdate : created_by
    Project ||--o{ ProjectStatusUpdate : has
    BadPracticeDetection ||--o{ PullRequestBadPractice : has
    Issue ||--o{ PullRequestBadPractice : references
    User ||--o{ PullRequestReview : reviewed
    Issue ||--o{ PullRequestReview : reviewed
    User ||--o{ PullRequestReviewComment : commented_on
    PullRequestReviewComment ||--o{ PullRequestReviewComment : commented_on
    Issue ||--o{ PullRequestReviewComment : commented_on
    PullRequestReview ||--o{ PullRequestReviewComment : commented_on
    PullRequestReviewThread ||--o{ PullRequestReviewComment : commented_on
    Issue ||--o{ PullRequestReviewThread : reviewed
    User ||--o{ PullRequestReviewThread : reviewed
    Organization ||--o{ Repository : has
    Workspace ||--o{ RepositoryToMonitor : monitors
    Workspace ||--o{ WorkspaceSlugHistory : has

    %% Many-to-Many relationships
    GitCommit }o--o{ CommitPullRequest : has
    Issue }o--o{ CommitPullRequest : references
    Discussion }o--o{ DiscussionLabel : labeled
    Label }o--o{ DiscussionLabel : labeled
    Issue }o--o{ IssueAssignee : assigned_to
    User }o--o{ IssueAssignee : assigned_to
    Issue }o--o{ IssueBlocking : has
    Issue }o--o{ IssueBlocking : has
    Issue }o--o{ IssueLabel : labeled
    Label }o--o{ IssueLabel : labeled
    Issue }o--o{ PullRequestRequestedReviewer : reviewed
    User }o--o{ PullRequestRequestedReviewer : reviewed
    Repository }o--o{ RepositoryCollaborator : has
    User }o--o{ RepositoryCollaborator : has
    Team }o--o{ TeamMembership : belongs_to
    User }o--o{ TeamMembership : belongs_to
    Repository }o--o{ TeamRepositoryPermission : has
    Team }o--o{ TeamRepositoryPermission : has
    Label }o--o{ WorkspaceTeamLabelFilter : labeled
    Team }o--o{ WorkspaceTeamLabelFilter : labeled
    Workspace }o--o{ WorkspaceTeamLabelFilter : labeled
    Repository }o--o{ WorkspaceTeamRepositorySetting : has
    Team }o--o{ WorkspaceTeamRepositorySetting : has
    Workspace }o--o{ WorkspaceTeamRepositorySetting : has
    Team }o--o{ WorkspaceTeamSetting : has
    Workspace }o--o{ WorkspaceTeamSetting : has

    %% Styling
    classDef primaryEntity fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef associationEntity fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef metadataEntity fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px

    class Issue primaryEntity
    class IssueAssignee associationEntity
    class IssueLabel associationEntity
    class Label primaryEntity
    class Milestone primaryEntity
    class PullRequestRequestedReviewer associationEntity
    class Repository primaryEntity
    class RepositoryToMonitor metadataEntity
    class Team primaryEntity
    class User primaryEntity
    class Workspace primaryEntity
