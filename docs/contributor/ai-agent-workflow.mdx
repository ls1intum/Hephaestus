---
title: AI Agent Workflow Guide
description: How to work effectively with AI coding agents in Hephaestus development.
---

# AI Agent Workflow Guide

This guide covers practical workflows for AI-assisted development in Hephaestus.

## Tools We Use

| Tool | Capabilities | Access |
|------|--------------|--------|
| **GitHub Copilot** | Agent mode (autonomous multi-file editing), inline completions, chat, PR reviewer, SWE agent (cloud tasks via issue assignment) | Free for students (300 premium requests/month via GitHub Student Pack), Pro $10/month |
| **CodeRabbit** | Automated PR review | GitHub App |
| **[Antigravity IDE](https://antigravity.dev)** | Claude Opus 4.5, complex reasoning tasks | Free for students |

**GitHub Copilot access:**
- **VSCode**: Agent mode, chat, inline completions, edits
- **GitHub Platform**: PR reviewer, SWE agent (assign issues to @copilot)

## Essential Git Commands

Before working with agents, know these diff commands:

```bash
# What changed vs main branch (full PR diff)
git --no-pager diff origin/main...HEAD

# What's staged for commit
git --no-pager diff --cached

# Unstaged changes only
git --no-pager diff

# Summary of changes
git status --short
```

## Validation Commands

Run after any changes:

```bash
npm run format      # Apply formatting
npm run check       # Full validation (format + lint + typecheck)
npm run test:webapp # Client tests
./mvnw verify       # Server tests
```

## Working with Agents

### Human Controls Git

**Agents should NOT stage, commit, or push without explicit permission.**

The human developer:
1. Reviews all changes in VSCode Source Control (tree view recommended)
2. Validates changes with `npm run check`
3. Stages verified changes incrementally
4. Reverts bad generations
5. Commits only validated code

### Review Loop

1. Request implementation from agent
2. Review diff in VSCode
3. Validate with `npm run check`
4. Stage good changes, revert bad ones
5. Re-prompt for fixes if needed

## Handling PR Reviews

Use `PAGER=cat gh` CLI to fetch and resolve review comments (works for any reviewer: human, CodeRabbit, Copilot, etc.).

### Fetch Unresolved Comments

```bash
PR_NUMBER=$(PAGER=cat gh pr view --json number -q .number)
OWNER=$(PAGER=cat gh repo view --json owner -q .owner.login)
REPO=$(PAGER=cat gh repo view --json name -q .name)

PAGER=cat gh api graphql -f query='
query($owner: String!, $repo: String!, $number: Int!) {
  repository(owner: $owner, name: $repo) {
    pullRequest(number: $number) {
      reviewThreads(first: 100) {
        nodes {
          id
          isResolved
          path
          line
          comments(first: 10) {
            nodes { body author { login } diffHunk }
          }
        }
      }
    }
  }
}' -F owner="$OWNER" -F repo="$REPO" -F number="$PR_NUMBER" \
  | jq '[.data.repository.pullRequest.reviewThreads.nodes[] | select(.isResolved == false)]'
```

### Resolve a Thread

```bash
PAGER=cat gh api graphql -f query='
mutation($threadId: ID!) {
  resolveReviewThread(input: {threadId: $threadId}) {
    thread { isResolved }
  }
}' -f threadId="PRRT_kwDO..."
```

### Decision Matrix

| Situation | Action |
|-----------|--------|
| Already fixed | Resolve thread |
| Valid issue | Fix code, then resolve |
| Disagree | Reply with reasoning, leave open |

## Beads Issue Tracking

We use [Beads](https://github.com/steveyegge/beads) for persistent issue tracking. Issues live in `.beads/issues.jsonl` and sync with git.

```bash
bd ready              # What's unblocked?
bd create "title" -t bug -p 1  # Create issue
bd close <id> --reason "done"  # Complete work
bd list --status open # All open issues
```

See `AGENTS.md` section 0 for the full workflow.

## Reusable Workflows

Slash commands available in `.github/prompts/`:

| Command | Description |
|---------|-------------|
| `/resolve-review` | Fetch and address PR review comments |
| `/land-pr` | Validate, commit, and create PR |

## Promptbook

*Placeholder: Add battle-tested prompts as they emerge from real usage.*

## Troubleshooting

### Agent Uses Outdated APIs

The agent's training data may be stale. Solutions:
- Paste current file contents into the prompt
- **Use web search** to find current documentation
- Reference working examples from the codebase

### Agent Ignores Instructions

1. Simplify the prompt
2. Break into smaller steps
3. Use explicit constraints: "Do NOT modify..."

### Build Failures

```bash
git checkout -- .     # Revert all changes
npm run format        # Re-run on clean state
```

## Configuration

Agent instructions are loaded from:
- `AGENTS.md` - Main reference for all agents
- `.github/copilot-instructions.md` - Copilot-specific hints
- `.github/instructions/` - Scoped instructions per file type
